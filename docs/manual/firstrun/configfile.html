<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Config. with files · Otoroshi</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='otoroshi-manual'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/cc.js"></script>
<script type="text/javascript" src="../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>

<!--
<link rel="shortcut icon" href="../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Otoroshi
</a>
<div class="version-number">
1.5.0-rc.2
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Otoroshi</a></li>
  <li><a href="../archi.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../quickstart.html" class="page">Try Otoroshi in 5 minutes</a></li>
  <li><a href="../getotoroshi/index.html" class="page">Get Otoroshi</a>
  <ul>
    <li><a href="../getotoroshi/fromsources.html" class="page">From sources</a></li>
    <li><a href="../getotoroshi/frombinaries.html" class="page">From binaries</a></li>
    <li><a href="../getotoroshi/fromdocker.html" class="page">From docker</a></li>
  </ul></li>
  <li><a href="../firstrun/index.html" class="page">First run</a>
  <ul>
    <li><a href="../firstrun/datastore.html" class="page">Choose your datastore</a></li>
    <li><a href="../firstrun/configfile.html" class="active page">Config. with files</a></li>
    <li><a href="../firstrun/env.html" class="page">Config. with ENVs</a></li>
    <li><a href="../firstrun/initialstate.html" class="page">Import initial state</a></li>
    <li><a href="../firstrun/host.html" class="page">Setup your hosts</a></li>
    <li><a href="../firstrun/run.html" class="page">Run Otoroshi</a></li>
  </ul></li>
  <li><a href="../setup/index.html" class="page">Setup Otoroshi</a>
  <ul>
    <li><a href="../setup/admin.html" class="page">Manage admin users</a></li>
    <li><a href="../setup/dangerzone.html" class="page">Configure the Danger zone</a></li>
  </ul></li>
  <li><a href="../usage/index.html" class="page">Using Otoroshi</a>
  <ul>
    <li><a href="../usage/1-groups.html" class="page">Managing service groups</a></li>
    <li><a href="../usage/2-services.html" class="page">Managing services</a></li>
    <li><a href="../usage/3-apikeys.html" class="page">Managing API keys</a></li>
    <li><a href="../usage/4-monitor.html" class="page">Monitoring services</a></li>
    <li><a href="../usage/5-sessions.html" class="page">Managing sessions</a></li>
    <li><a href="../usage/6-audit.html" class="page">Auditing Otoroshi</a></li>
    <li><a href="../usage/7-metrics.html" class="page">Otoroshi global metrics</a></li>
    <li><a href="../usage/8-importsexports.html" class="page">Import and export</a></li>
    <li><a href="../usage/9-auth.html" class="page">Authentication</a></li>
  </ul></li>
  <li><a href="../integrations/index.html" class="page">Third party Integrations</a>
  <ul>
    <li><a href="../integrations/analytics.html" class="page">Analytics</a></li>
    <li><a href="../integrations/mailgun.html" class="page">Mailgun</a></li>
    <li><a href="../integrations/statsd.html" class="page">StatsD / Datadog</a></li>
    <li><a href="../integrations/clevercloud.html" class="page">Clever Cloud</a></li>
  </ul></li>
  <li><a href="../topics/index.html" class="page">Detailed topics</a>
  <ul>
    <li><a href="../topics/snow-monkey.html" class="page">Chaos engineering with the Snow Monkey</a></li>
    <li><a href="../topics/jwt-verifications.html" class="page">JWT Tokens verification</a></li>
    <li><a href="../topics/ssl.html" class="page">SSL/TLS termination with Otoroshi</a></li>
    <li><a href="../topics/mtls.html" class="page">Mutual TLS with Otoroshi</a></li>
    <li><a href="../topics/clustering.html" class="page">Otoroshi clustering</a></li>
    <li><a href="../topics/plugins.html" class="page">Otoroshi plugins</a></li>
    <li><a href="../topics/monitoring.html" class="page">Monitoring Otoroshi</a></li>
  </ul></li>
  <li><a href="../api.html" class="page">Admin REST API</a></li>
  <li><a href="../deploy/index.html" class="page">Deploy to production</a>
  <ul>
    <li><a href="../deploy/kubernetes.html" class="page">Kubernetes</a></li>
    <li><a href="../deploy/clevercloud.html" class="page">Clever Cloud</a></li>
    <li><a href="../deploy/aws-beanstalk.html" class="page">AWS - Elastic Beanstalk</a></li>
    <li><a href="../deploy/other.html" class="page">Others</a></li>
    <li><a href="../deploy/scaling.html" class="page">Scaling Otoroshi</a></li>
  </ul></li>
  <li><a href="../dev.html" class="page">Developing Otoroshi</a></li>
  <li><a href="../plugins/index.html" class="page">Otoroshi plugins</a>
  <ul>
    <li><a href="../plugins/otoroshi-plugins-accesslog-accesslog.html" class="page">Access log (CLF)</a></li>
    <li><a href="../plugins/otoroshi-plugins-accesslog-accesslogjson.html" class="page">Access log (JSON)</a></li>
    <li><a href="../plugins/otoroshi-plugins-users-hasallowedusersvalidator.html" class="page">Allowed users only</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-apikeyauthmodule.html" class="page">Apikey auth module</a></li>
    <li><a href="../plugins/otoroshi-plugins-biscuit-biscuitextractor.html" class="page">Apikey from Biscuit token extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-authcallers-basicauthcaller.html" class="page">Basic Auth. caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-biscuit-biscuitvalidator.html" class="page">Biscuit token validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-loggers-bodylogger.html" class="page">Body logger</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchingapikeyvalidator.html" class="page">Client Certificate + Api Key only</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertvalidator.html" class="page">Client Certificate Only</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-clientcredentialflowextractor.html" class="page">Client Credential Flow ApiKey extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-clientcredentialservice.html" class="page">Client Credential Service</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-certificateasapikey.html" class="page">Client certificate as apikey</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-clientcertchainheader.html" class="page">Client certificate header</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchingvalidator.html" class="page">Client certificate matching</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchinghttpvalidator.html" class="page">Client certificate matching (over http)</a></li>
    <li><a href="../plugins/otoroshi-plugins-defer-deferplugin.html" class="page">Defer Responses</a></li>
    <li><a href="../plugins/otoroshi-plugins-envoy-envoycontrolplane.html" class="page">Envoy Control Plane (experimental)</a></li>
    <li><a href="../plugins/otoroshi-plugins-external-externalhttpvalidator.html" class="page">External Http Validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-ipstackgeolocationinfoextractor.html" class="page">Geolocation details extractor (using IpStack api)</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-maxmindgeolocationinfoextractor.html" class="page">Geolocation details extractor (using Maxmind db)</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-geolocationinfoendpoint.html" class="page">Geolocation endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-geolocationinfoheader.html" class="page">Geolocation header</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoveryselfregistrationsink.html" class="page">Global self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-hmac-hmacvalidator.html" class="page">HMAC access validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-hmac-hmaccallerplugin.html" class="page">HMAC caller plugin</a></li>
    <li><a href="../plugins/otoroshi-plugins-jsoup-htmlpatcher.html" class="page">Html Patcher</a></li>
    <li><a href="../plugins/otoroshi-plugins-quotas-instancequotas.html" class="page">Instance quotas</a></li>
    <li><a href="../plugins/otoroshi-plugins-izanami-izanamiproxy.html" class="page">Izanami APIs Proxy</a></li>
    <li><a href="../plugins/otoroshi-plugins-izanami-izanamicanary.html" class="page">Izanami Canary Campaign</a></li>
    <li><a href="../plugins/otoroshi-plugins-jwt-jwtuserextractor.html" class="page">Jwt user extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-accesslog-kafkaaccesslog.html" class="page">Kafka access log</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesingresscontrollerjob.html" class="page">Kubernetes Ingress Controller</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesotoroshicrdscontrollerjob.html" class="page">Kubernetes Otoroshi CRDs Controller</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesadmissionwebhookcrdvalidator.html" class="page">Kubernetes admission validator webhook</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesadmissionwebhooksidecarinjector.html" class="page">Kubernetes sidecar injector webhook</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetestootoroshicertsyncjob.html" class="page">Kubernetes to Otoroshi certs. synchronizer</a></li>
    <li><a href="../plugins/otoroshi-plugins-mirror-mirroringplugin.html" class="page">Mirroring plugin</a></li>
    <li><a href="../plugins/otoroshi-plugins-oauth1-oauth1callerplugin.html" class="page">OAuth1 caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-authcallers-oauth2caller.html" class="page">OAuth2 caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcaccesstokenasapikey.html" class="page">OIDC access_token as apikey</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcaccesstokenvalidator.html" class="page">OIDC access_token validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcheaders.html" class="page">OIDC headers</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-otoroshitokubernetescertsyncjob.html" class="page">Otoroshi certs. to Kubernetes secrets synchronizer</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-prometheusendpoint.html" class="page">Prometheus Endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-prometheusservicemetrics.html" class="page">Prometheus Service Metrics</a></li>
    <li><a href="../plugins/otoroshi-plugins-quotas-servicequotas.html" class="page">Public quotas</a></li>
    <li><a href="../plugins/otoroshi-plugins-cache-responsecache.html" class="page">Response Cache</a></li>
    <li><a href="../plugins/otoroshi-plugins-security-securitytxt.html" class="page">Security Txt</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoveryselfregistrationtransformer.html" class="page">Self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-servicemetrics.html" class="page">Service Metrics</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoverytargetsselector.html" class="page">Service discovery target selector (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-static-staticresponse.html" class="page">Static Response</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentextractor.html" class="page">User-Agent details extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentinfoendpoint.html" class="page">User-Agent endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentinfoheader.html" class="page">User-Agent header</a></li>
    <li><a href="../plugins/otoroshi-plugins-workflow-workflowendpoint.html" class="page">Workflow endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-workflow-workflowjob.html" class="page">Workflow job</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title-wrapper">
<div class="title-logo"></div>
<div class="title"><a href="../index.html">Otoroshi</a></div>
</div>
<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Otoroshi
</a>
<div class="version-number">
1.5.0-rc.2
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Otoroshi</a></li>
  <li><a href="../archi.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../quickstart.html" class="page">Try Otoroshi in 5 minutes</a></li>
  <li><a href="../getotoroshi/index.html" class="page">Get Otoroshi</a>
  <ul>
    <li><a href="../getotoroshi/fromsources.html" class="page">From sources</a></li>
    <li><a href="../getotoroshi/frombinaries.html" class="page">From binaries</a></li>
    <li><a href="../getotoroshi/fromdocker.html" class="page">From docker</a></li>
  </ul></li>
  <li><a href="../firstrun/index.html" class="page">First run</a>
  <ul>
    <li><a href="../firstrun/datastore.html" class="page">Choose your datastore</a></li>
    <li><a href="../firstrun/configfile.html" class="active page">Config. with files</a></li>
    <li><a href="../firstrun/env.html" class="page">Config. with ENVs</a></li>
    <li><a href="../firstrun/initialstate.html" class="page">Import initial state</a></li>
    <li><a href="../firstrun/host.html" class="page">Setup your hosts</a></li>
    <li><a href="../firstrun/run.html" class="page">Run Otoroshi</a></li>
  </ul></li>
  <li><a href="../setup/index.html" class="page">Setup Otoroshi</a>
  <ul>
    <li><a href="../setup/admin.html" class="page">Manage admin users</a></li>
    <li><a href="../setup/dangerzone.html" class="page">Configure the Danger zone</a></li>
  </ul></li>
  <li><a href="../usage/index.html" class="page">Using Otoroshi</a>
  <ul>
    <li><a href="../usage/1-groups.html" class="page">Managing service groups</a></li>
    <li><a href="../usage/2-services.html" class="page">Managing services</a></li>
    <li><a href="../usage/3-apikeys.html" class="page">Managing API keys</a></li>
    <li><a href="../usage/4-monitor.html" class="page">Monitoring services</a></li>
    <li><a href="../usage/5-sessions.html" class="page">Managing sessions</a></li>
    <li><a href="../usage/6-audit.html" class="page">Auditing Otoroshi</a></li>
    <li><a href="../usage/7-metrics.html" class="page">Otoroshi global metrics</a></li>
    <li><a href="../usage/8-importsexports.html" class="page">Import and export</a></li>
    <li><a href="../usage/9-auth.html" class="page">Authentication</a></li>
  </ul></li>
  <li><a href="../integrations/index.html" class="page">Third party Integrations</a>
  <ul>
    <li><a href="../integrations/analytics.html" class="page">Analytics</a></li>
    <li><a href="../integrations/mailgun.html" class="page">Mailgun</a></li>
    <li><a href="../integrations/statsd.html" class="page">StatsD / Datadog</a></li>
    <li><a href="../integrations/clevercloud.html" class="page">Clever Cloud</a></li>
  </ul></li>
  <li><a href="../topics/index.html" class="page">Detailed topics</a>
  <ul>
    <li><a href="../topics/snow-monkey.html" class="page">Chaos engineering with the Snow Monkey</a></li>
    <li><a href="../topics/jwt-verifications.html" class="page">JWT Tokens verification</a></li>
    <li><a href="../topics/ssl.html" class="page">SSL/TLS termination with Otoroshi</a></li>
    <li><a href="../topics/mtls.html" class="page">Mutual TLS with Otoroshi</a></li>
    <li><a href="../topics/clustering.html" class="page">Otoroshi clustering</a></li>
    <li><a href="../topics/plugins.html" class="page">Otoroshi plugins</a></li>
    <li><a href="../topics/monitoring.html" class="page">Monitoring Otoroshi</a></li>
  </ul></li>
  <li><a href="../api.html" class="page">Admin REST API</a></li>
  <li><a href="../deploy/index.html" class="page">Deploy to production</a>
  <ul>
    <li><a href="../deploy/kubernetes.html" class="page">Kubernetes</a></li>
    <li><a href="../deploy/clevercloud.html" class="page">Clever Cloud</a></li>
    <li><a href="../deploy/aws-beanstalk.html" class="page">AWS - Elastic Beanstalk</a></li>
    <li><a href="../deploy/other.html" class="page">Others</a></li>
    <li><a href="../deploy/scaling.html" class="page">Scaling Otoroshi</a></li>
  </ul></li>
  <li><a href="../dev.html" class="page">Developing Otoroshi</a></li>
  <li><a href="../plugins/index.html" class="page">Otoroshi plugins</a>
  <ul>
    <li><a href="../plugins/otoroshi-plugins-accesslog-accesslog.html" class="page">Access log (CLF)</a></li>
    <li><a href="../plugins/otoroshi-plugins-accesslog-accesslogjson.html" class="page">Access log (JSON)</a></li>
    <li><a href="../plugins/otoroshi-plugins-users-hasallowedusersvalidator.html" class="page">Allowed users only</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-apikeyauthmodule.html" class="page">Apikey auth module</a></li>
    <li><a href="../plugins/otoroshi-plugins-biscuit-biscuitextractor.html" class="page">Apikey from Biscuit token extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-authcallers-basicauthcaller.html" class="page">Basic Auth. caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-biscuit-biscuitvalidator.html" class="page">Biscuit token validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-loggers-bodylogger.html" class="page">Body logger</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchingapikeyvalidator.html" class="page">Client Certificate + Api Key only</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertvalidator.html" class="page">Client Certificate Only</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-clientcredentialflowextractor.html" class="page">Client Credential Flow ApiKey extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-clientcredentialservice.html" class="page">Client Credential Service</a></li>
    <li><a href="../plugins/otoroshi-plugins-apikeys-certificateasapikey.html" class="page">Client certificate as apikey</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-clientcertchainheader.html" class="page">Client certificate header</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchingvalidator.html" class="page">Client certificate matching</a></li>
    <li><a href="../plugins/otoroshi-plugins-clientcert-hasclientcertmatchinghttpvalidator.html" class="page">Client certificate matching (over http)</a></li>
    <li><a href="../plugins/otoroshi-plugins-defer-deferplugin.html" class="page">Defer Responses</a></li>
    <li><a href="../plugins/otoroshi-plugins-envoy-envoycontrolplane.html" class="page">Envoy Control Plane (experimental)</a></li>
    <li><a href="../plugins/otoroshi-plugins-external-externalhttpvalidator.html" class="page">External Http Validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-ipstackgeolocationinfoextractor.html" class="page">Geolocation details extractor (using IpStack api)</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-maxmindgeolocationinfoextractor.html" class="page">Geolocation details extractor (using Maxmind db)</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-geolocationinfoendpoint.html" class="page">Geolocation endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-geoloc-geolocationinfoheader.html" class="page">Geolocation header</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoveryselfregistrationsink.html" class="page">Global self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-hmac-hmacvalidator.html" class="page">HMAC access validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-hmac-hmaccallerplugin.html" class="page">HMAC caller plugin</a></li>
    <li><a href="../plugins/otoroshi-plugins-jsoup-htmlpatcher.html" class="page">Html Patcher</a></li>
    <li><a href="../plugins/otoroshi-plugins-quotas-instancequotas.html" class="page">Instance quotas</a></li>
    <li><a href="../plugins/otoroshi-plugins-izanami-izanamiproxy.html" class="page">Izanami APIs Proxy</a></li>
    <li><a href="../plugins/otoroshi-plugins-izanami-izanamicanary.html" class="page">Izanami Canary Campaign</a></li>
    <li><a href="../plugins/otoroshi-plugins-jwt-jwtuserextractor.html" class="page">Jwt user extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-accesslog-kafkaaccesslog.html" class="page">Kafka access log</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesingresscontrollerjob.html" class="page">Kubernetes Ingress Controller</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesotoroshicrdscontrollerjob.html" class="page">Kubernetes Otoroshi CRDs Controller</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesadmissionwebhookcrdvalidator.html" class="page">Kubernetes admission validator webhook</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetesadmissionwebhooksidecarinjector.html" class="page">Kubernetes sidecar injector webhook</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-kubernetestootoroshicertsyncjob.html" class="page">Kubernetes to Otoroshi certs. synchronizer</a></li>
    <li><a href="../plugins/otoroshi-plugins-mirror-mirroringplugin.html" class="page">Mirroring plugin</a></li>
    <li><a href="../plugins/otoroshi-plugins-oauth1-oauth1callerplugin.html" class="page">OAuth1 caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-authcallers-oauth2caller.html" class="page">OAuth2 caller</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcaccesstokenasapikey.html" class="page">OIDC access_token as apikey</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcaccesstokenvalidator.html" class="page">OIDC access_token validator</a></li>
    <li><a href="../plugins/otoroshi-plugins-oidc-oidcheaders.html" class="page">OIDC headers</a></li>
    <li><a href="../plugins/otoroshi-plugins-jobs-kubernetes-otoroshitokubernetescertsyncjob.html" class="page">Otoroshi certs. to Kubernetes secrets synchronizer</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-prometheusendpoint.html" class="page">Prometheus Endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-prometheusservicemetrics.html" class="page">Prometheus Service Metrics</a></li>
    <li><a href="../plugins/otoroshi-plugins-quotas-servicequotas.html" class="page">Public quotas</a></li>
    <li><a href="../plugins/otoroshi-plugins-cache-responsecache.html" class="page">Response Cache</a></li>
    <li><a href="../plugins/otoroshi-plugins-security-securitytxt.html" class="page">Security Txt</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoveryselfregistrationtransformer.html" class="page">Self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-metrics-servicemetrics.html" class="page">Service Metrics</a></li>
    <li><a href="../plugins/otoroshi-plugins-discovery-discoverytargetsselector.html" class="page">Service discovery target selector (service discovery)</a></li>
    <li><a href="../plugins/otoroshi-plugins-static-staticresponse.html" class="page">Static Response</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentextractor.html" class="page">User-Agent details extractor</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentinfoendpoint.html" class="page">User-Agent endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-useragent-useragentinfoheader.html" class="page">User-Agent header</a></li>
    <li><a href="../plugins/otoroshi-plugins-workflow-workflowendpoint.html" class="page">Workflow endpoint</a></li>
    <li><a href="../plugins/otoroshi-plugins-workflow-workflowjob.html" class="page">Workflow job</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../index.html">Otoroshi</a></li>
  <li><a href="../firstrun/index.html">First run</a></li>
  <li>Config. with files</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#config-with-files" name="config-with-files" class="anchor"><span class="anchor-link"></span></a>Config. with files</h1>
<p>There is a lot of things you can configure in Otoroshi. By default, Otoroshi provides a configuration that should be enough for testing purpose. But you&rsquo;ll likely need to update this configuration when you&rsquo;ll need to move into production.</p>
<p>In this page, any configuration property can be set at runtime using a <code>-D</code> flag when launching Otoroshi like</p>
<pre class="prettyprint"><code class="language-sh">java -Dhttp.port=8080 -jar otoroshi.jar
</code></pre>
<p>or</p>
<pre class="prettyprint"><code class="language-sh">./bin/otoroshi -Dhttp.port=8080 
</code></pre>
<p>if you want to define your own config file and use it on an otoroshi instance, use the following flag</p>
<pre class="prettyprint"><code class="language-sh">java -Dconfig.file=/path/to/otoroshi.conf -jar otoroshi.jar
</code></pre>
<h2><a href="#common-configuration" name="common-configuration" class="anchor"><span class="anchor-link"></span></a>Common configuration</h2>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>app.domain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;oto.tools&rdquo; </td>
      <td>the domain on which Otoroshi UI/API is be exposed</td>
    </tr>
    <tr>
      <td><code>app.rootScheme</code> </td>
      <td align="center">string </td>
      <td>&ldquo;http&rdquo; </td>
      <td>the scheme on which Otoroshi is exposed, either &ldquo;http&rdquo; or &ldquo;https&rdquo; </td>
    </tr>
    <tr>
      <td><code>app.snowflake.seed</code> </td>
      <td align="center">number </td>
      <td>0 </td>
      <td>this number will is used to generate unique ids across the cluster. Each Otorshi instance must have a unique seed. </td>
    </tr>
    <tr>
      <td><code>app.events.maxSize</code> </td>
      <td align="center">number </td>
      <td>1000 </td>
      <td>max number of analytic and alert events stored locally </td>
    </tr>
    <tr>
      <td><code>app.backoffice.exposed</code> </td>
      <td align="center">boolean </td>
      <td>true </td>
      <td>does the current Otoroshi instance exposed a backoffice ui</td>
    </tr>
    <tr>
      <td><code>app.backoffice.subdomain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;otoroshi&rdquo; </td>
      <td>the subdomain on wich Otoroshi backoffice will be served </td>
    </tr>
    <tr>
      <td><code>app.backoffice.session.exp</code> </td>
      <td align="center">number </td>
      <td>86400000 </td>
      <td>the number of seconds before the Otoroshi backoffice session expires </td>
    </tr>
    <tr>
      <td><code>app.privateapps.subdomain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;privateapps&rdquo; </td>
      <td>the subdomain on which private apps UI are served </td>
    </tr>
    <tr>
      <td><code>app.privateapps.session.exp</code> </td>
      <td align="center">number </td>
      <td>86400000 </td>
      <td>the number of seconds before the private apps session expires </td>
    </tr>
    <tr>
      <td><code>app.claim.sharedKey</code> </td>
      <td align="center">string </td>
      <td>&ldquo;secret&rdquo; </td>
      <td>the shared secret used for signing the JWT token passed between Otoroshi and backend services </td>
    </tr>
    <tr>
      <td><code>app.webhooks.size</code> </td>
      <td align="center">number </td>
      <td>100 </td>
      <td>number of events sent at most when calling one of the analytics webhooks </td>
    </tr>
    <tr>
      <td><code>app.throttlingWindow</code> </td>
      <td align="center">number </td>
      <td>10 </td>
      <td>time window (in seconds) used to compute throttling quotas for ApiKeys </td>
    </tr>
  </tbody>
</table>
<h2><a href="#admin-api-configuration" name="admin-api-configuration" class="anchor"><span class="anchor-link"></span></a>Admin API configuration</h2>
<p>When Otoroshi starts for the first time, its datastore is empty. As Otoroshi uses Otoroshi to expose its admin REST API, you&rsquo;ll have to provide the details for the admin API exposition. <strong>This part is super important</strong> because if you go to production with the default values, your Otoroshi server won&rsquo;t be secured anymore.</p><div class="callout warning "><div class="callout-title">Warning</div>
<p>YOU HAVE TO CUSTOMIZE THE FOLLOWING VALUES BEFORE GOING TO PRODUCTION !!</p></div>
<p>Some of the following terms will seem obscure to you, but you will learn their meaning in the following chapters :)</p>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>app.adminapi.exposed</code> </td>
      <td align="center">boolean </td>
      <td>true </td>
      <td>does the current Otoroshi instance expose an admin API </td>
    </tr>
    <tr>
      <td><code>app.adminapi.targetSubdomain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;otoroshi-admin-internal-api&rdquo; </td>
      <td>the subdomain on wich admin API call will be redirected from <code>app.adminapi.exposedSubdomain</code> </td>
    </tr>
    <tr>
      <td><code>app.adminapi.exposedSubdomain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;otoroshi-api&rdquo; </td>
      <td>the subdomain on wich the Otoroshi admin API will be exposed </td>
    </tr>
    <tr>
      <td><code>app.adminapi.defaultValues.backOfficeGroupId</code> </td>
      <td align="center">string </td>
      <td>&ldquo;admin-api-group&rdquo; </td>
      <td>the name of the service groups that will contain the service descriptors for the Otoroshi admin API </td>
    </tr>
    <tr>
      <td><code>app.adminapi.defaultValues.backOfficeApiKeyClientId</code> </td>
      <td align="center">string </td>
      <td>&ldquo;admin-api-apikey-id&rdquo; </td>
      <td>the client id of the Otoroshi admin API apikey </td>
    </tr>
    <tr>
      <td><code>app.adminapi.defaultValues.backOfficeApiKeyClientSecret</code> </td>
      <td align="center">string </td>
      <td>&ldquo;admin-api-apikey-secret&rdquo; </td>
      <td>the client secret of the Otoroshi admin API apikey </td>
    </tr>
    <tr>
      <td><code>app.adminapi.defaultValues.backOfficeServiceId</code> </td>
      <td align="center">string </td>
      <td>&ldquo;admin-api-service&rdquo; </td>
      <td>the id of the service descriptors for the Otoroshi admin API </td>
    </tr>
    <tr>
      <td><code>app.adminapi.proxy.https</code> </td>
      <td align="center">boolean </td>
      <td>false </td>
      <td>whether or not the current Otoroshi instance serves its content over https. This setting is useful for the backoffice UI to access Otoroshi admin API </td>
    </tr>
    <tr>
      <td><code>app.adminapi.proxy.local</code> </td>
      <td align="center">boolean </td>
      <td>true </td>
      <td>whether or not the admin API is accessible through <code>127.0.0.1</code>. This setting is useful for the backoffice UI to access Otoroshi admin API </td>
    </tr>
  </tbody>
</table>
<h2><a href="#secrets-config" name="secrets-config" class="anchor"><span class="anchor-link"></span></a>Secrets config</h2>
<p>When Otoroshi starts for the first time, its secrets are set by default. </p><div class="callout warning "><div class="callout-title">Warning</div>
<p>YOU HAVE TO CUSTOMIZE AT LEAST <code>otoroshi.secret</code> BEFORE GOING TO PRODUCTION !!</p></div>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>otoroshi.secret</code> </td>
      <td align="center">string </td>
      <td>&lsquo;verysecretvaluethatyoumustoverwrite&rsquo; </td>
      <td>default Otoroshi secret. This value is used by default for other secrets </td>
    </tr>
    <tr>
      <td><code>otoroshi.sessions.secret</code> </td>
      <td align="center">string </td>
      <td><code>otoroshi.secret</code> </td>
      <td>Secret used to cipher session ids </td>
    </tr>
    <tr>
      <td><code>play.http.secret.key</code> </td>
      <td align="center">string </td>
      <td><code>otoroshi.secret</code> </td>
      <td>the secret used to sign Otoroshi session cookie </td>
    </tr>
  </tbody>
</table>
<h2><a href="#db-configuration" name="db-configuration" class="anchor"><span class="anchor-link"></span></a>DB configuration</h2>
<p>As Otoroshi supports multiple datastores, you&rsquo;ll have to provide some details about how to connect/configure it.</p>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>app.storage</code> </td>
      <td align="center">string </td>
      <td>&ldquo;inmemory&rdquo; </td>
      <td>what kind of storage engine you want to use. Possible values are <code>inmemory</code>, <code>file</code>, <code>redis</code>, <code>cassandra</code> </td>
    </tr>
    <tr>
      <td><code>app.importFrom</code> </td>
      <td align="center">string </td>
      <td> </td>
      <td>a file path or a URL to an Otoroshi export file. If the datastore is empty on startup, this file will be used to import data to the empty DB </td>
    </tr>
    <tr>
      <td><code>app.importFromHeaders</code> </td>
      <td align="center">array </td>
      <td> [] </td>
      <td>a list of <code>:</code> separated header to use if the <code>app.importFrom</code> setting is a URL </td>
    </tr>
    <tr>
      <td><code>app.initialData</code> </td>
      <td align="center">object </td>
      <td>  </td>
      <td>object representing Otoroshi internal data as exported from danger zone so you don&rsquo;t need a config file and a data import file </td>
    </tr>
    <tr>
      <td><code>app.redis.host</code> </td>
      <td align="center">string </td>
      <td>&ldquo;localhost&rdquo; </td>
      <td>the host of the redis server </td>
    </tr>
    <tr>
      <td><code>app.redis.port</code> </td>
      <td align="center">number </td>
      <td>6379 </td>
      <td>the port of the redis server </td>
    </tr>
    <tr>
      <td><code>app.redis.slaves</code> </td>
      <td align="center">array </td>
      <td>[] </td>
      <td>the redis slaves lists </td>
    </tr>
    <tr>
      <td><code>app.filedb.path</code> </td>
      <td align="center">string </td>
      <td>&ldquo;./filefb&rdquo; </td>
      <td>the path where filedb files will be written </td>
    </tr>
    <tr>
      <td><code>app.cassandra.hosts</code> </td>
      <td align="center">string </td>
      <td>&ldquo;127.0.0.1&rdquo; </td>
      <td>the host of the cassandra server </td>
    </tr>
    <tr>
      <td><code>app.cassandra.host</code> </td>
      <td align="center">string </td>
      <td>&ldquo;127.0.0.1&rdquo; </td>
      <td>the list of cassandra hosts </td>
    </tr>
    <tr>
      <td><code>app.cassandra.port</code> </td>
      <td align="center">number </td>
      <td>9042 </td>
      <td>the port of the cassandra servers </td>
    </tr>
    <tr>
      <td><code>app.pg.uri</code> </td>
      <td align="center">string </td>
      <td> </td>
      <td>the uri of your pg database </td>
    </tr>
    <tr>
      <td><code>app.pg.host</code> </td>
      <td align="center">string </td>
      <td>localhost </td>
      <td>the host of your pg database </td>
    </tr>
    <tr>
      <td><code>app.pg.port</code> </td>
      <td align="center">number </td>
      <td>5432 </td>
      <td>the port of your pg database </td>
    </tr>
    <tr>
      <td><code>app.pg.database</code> </td>
      <td align="center">string </td>
      <td>otoroshi </td>
      <td>the database name </td>
    </tr>
    <tr>
      <td><code>app.pg.user</code> </td>
      <td align="center">string </td>
      <td>otoroshi </td>
      <td>the username to connect to your pg database </td>
    </tr>
    <tr>
      <td><code>app.pg.password</code> </td>
      <td align="center">string </td>
      <td>otoroshi </td>
      <td>the password to connect to your pg database </td>
    </tr>
  </tbody>
</table>
<h2><a href="#headers-configuration" name="headers-configuration" class="anchor"><span class="anchor-link"></span></a>Headers configuration</h2>
<p>Otoroshi uses a fair amount of http headers in order to work properly. The name of those headers are customizable to fit your needs.</p>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>otoroshi.headers.trace.label</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Viz-From-Label&rdquo; </td>
      <td>header to pass request tracing informations </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.trace.from</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Viz-From&rdquo; </td>
      <td>header to pass request tracing informations (ip address) </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.trace.parent</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Parent-Request&rdquo; </td>
      <td>header to pass request tracing informations (parent request id) </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.request.adminprofile</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Admin-Profile&rdquo; </td>
      <td>header to pass admin name when the admin API is called from the Otoroshi backoffice </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.request.clientid</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Client-Id&rdquo; </td>
      <td>header to pass apikey client id </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.request.clientsecret</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Client-Secret&rdquo; </td>
      <td>header to pass apikey client secret </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.request.id</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Request-Id&rdquo; </td>
      <td>header containing the id of the current request </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.proxyhost</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Proxied-Host&rdquo; </td>
      <td>header containing the proxied host </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.error</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Error&rdquo; </td>
      <td>header containing whether or not the request generated an error </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.errormsg</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Error-Msg&rdquo; </td>
      <td>header containing error message if some </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.proxylatency</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Proxy-Latency&rdquo; </td>
      <td>header containing the current latency induced by Otoroshi </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.upstreamlatency</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Upstream-Latency&rdquo; </td>
      <td>header containing the current latency from Otoroshi to service backend </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.dailyquota</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Daily-Calls-Remaining&rdquo; </td>
      <td>header containing the number of remaining daily call (apikey) </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.response.monthlyquota</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Monthly-Calls-Remaining&rdquo; </td>
      <td>header containing the number of remaining monthly call (apikey) </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.comm.state</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-State&rdquo; </td>
      <td>header containing a random value for secured mode </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.comm.stateresp</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-State-Resp&rdquo; </td>
      <td>header containing a random value for secured mode </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.comm.claim</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Claim&rdquo; </td>
      <td>header containing a JWT token for secured mode </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.healthcheck.test</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Health-Check-Logic-Test&rdquo; </td>
      <td>header containing a logic test for healthcheck </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.healthcheck.testresult</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Health-Check-Logic-Test-Result&rdquo; </td>
      <td>header containing the result of a logic test for healthcheck </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.jwt.issuer</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi&rdquo; </td>
      <td>the name of the issuer for the JWT token </td>
    </tr>
    <tr>
      <td><code>otoroshi.headers.canary.tracker</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi-Canary-Id&rdquo; </td>
      <td>header containing the ID of the canary session if enabled </td>
    </tr>
  </tbody>
</table>
<h2><a href="#play-specific-configuration" name="play-specific-configuration" class="anchor"><span class="anchor-link"></span></a>Play specific configuration</h2>
<p>As Otoroshi is a <a href="https://www.playframework.com/">Play app</a>, you should take a look at <a href="https://www.playframework.com/documentation/2.6.x/Configuration">Play configuration documentation</a> to tune its internal configuration</p>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th align="center">type </th>
      <th>default value </th>
      <th>description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>http.port</code> </td>
      <td align="center">number </td>
      <td>8080 </td>
      <td>the http port used by Otoroshi. You can use &lsquo;disabled&rsquo; as value if you don&rsquo;t want to use http </td>
    </tr>
    <tr>
      <td><code>https.port</code> </td>
      <td align="center">number </td>
      <td>disabled </td>
      <td>the https port used by Otoroshi. You can use &lsquo;disabled&rsquo; as value if you don&rsquo;t want to use https </td>
    </tr>
    <tr>
      <td><code>http2.enabled</code> </td>
      <td align="center">boolean </td>
      <td>false </td>
      <td>whether or not http2 is enabled on the Otoroshi server. You need to configure https (listed bellow) to be able to use it </td>
    </tr>
    <tr>
      <td><code>play.http.secret.key</code> </td>
      <td align="center">string </td>
      <td>&ldquo;secret&rdquo; </td>
      <td>the secret used to sign Otoroshi session cookie </td>
    </tr>
    <tr>
      <td><code>play.http.session.secure</code> </td>
      <td align="center">boolean </td>
      <td>false </td>
      <td>whether or not the Otoroshi backoffice session will be served over https only </td>
    </tr>
    <tr>
      <td><code>play.http.session.httpOnly</code> </td>
      <td align="center">boolean </td>
      <td>true </td>
      <td>whether or not the Otoroshi backoffice session will be accessible from Javascript </td>
    </tr>
    <tr>
      <td><code>play.http.session.maxAge</code> </td>
      <td align="center">number </td>
      <td>259200000 </td>
      <td>the number of seconds before Otoroshi backoffice session expired </td>
    </tr>
    <tr>
      <td><code>play.http.session.domain</code> </td>
      <td align="center">string </td>
      <td>&ldquo;.oto.tools&rdquo; </td>
      <td>the domain on which the Otoroshi backoffice session is authorized </td>
    </tr>
    <tr>
      <td><code>play.http.session.cookieName</code> </td>
      <td align="center">string </td>
      <td>&ldquo;otoroshi-session&rdquo; </td>
      <td>the name of the Otoroshi backoffice session </td>
    </tr>
    <tr>
      <td><code>play.ws.play.ws.useragent</code> </td>
      <td align="center">string </td>
      <td>&ldquo;Otoroshi&rdquo; </td>
      <td>the user agent sent by Otoroshi if not present on the original http request </td>
    </tr>
    <tr>
      <td><code>play.server.https.keyStore.path</code> </td>
      <td align="center">string </td>
      <td> </td>
      <td>the path to the keystore containing the private key and certificate, if not provided generates a keystore for you </td>
    </tr>
    <tr>
      <td><code>play.server.https.keyStore.type</code> </td>
      <td align="center">string </td>
      <td>JKS </td>
      <td>the key store type, defaults to JKS </td>
    </tr>
    <tr>
      <td><code>play.server.https.keyStore.password</code> </td>
      <td align="center">string </td>
      <td>&rsquo;&rsquo; </td>
      <td>the password, defaults to a blank password </td>
    </tr>
    <tr>
      <td><code>play.server.https.keyStore.algorithm</code> </td>
      <td align="center">string </td>
      <td> </td>
      <td>the key store algorithm, defaults to the platforms default algorithm </td>
    </tr>
  </tbody>
</table>
<h2><a href="#more-config-options" name="more-config-options" class="anchor"><span class="anchor-link"></span></a>More config. options</h2>
<p>See <a href="https://github.com/MAIF/otoroshi/blob/master/otoroshi/conf/base.conf">https://github.com/MAIF/otoroshi/blob/master/otoroshi/conf/base.conf</a> and <a href="https://github.com/MAIF/otoroshi/blob/master/otoroshi/conf/application.conf">https://github.com/MAIF/otoroshi/blob/master/otoroshi/conf/application.conf</a></p>
<p>if you want to configure https on your Otoroshi server, just read <a href="https://www.playframework.com/documentation/2.6.x/ConfiguringHttps">PlayFramework documentation about it</a></p>
<h2><a href="#example-of-a-custom-configuration-file" name="example-of-a-custom-configuration-file" class="anchor"><span class="anchor-link"></span></a>Example of a custom. configuration file</h2>
<pre class="prettyprint"><code class="language-conf">include &quot;application.conf&quot;

http.port = 8080

app {
  storage = &quot;file&quot;
  importFrom = &quot;./my-state.json&quot;
  env = &quot;prod&quot;
  domain = &quot;oto.tools&quot;
  rootScheme = &quot;http&quot;
  snowflake {
    seed = 0
  }
  events {
    maxSize = 1000
  }
  backoffice {
    subdomain = &quot;otoroshi&quot;
    session {
      exp = 86400000
    }
  }
  privateapps {
    subdomain = &quot;privateapps&quot;
    session {
      exp = 86400000
    }
  }
  adminapi {
    targetSubdomain = &quot;otoroshi-admin-internal-api&quot;
    exposedSubdomain = &quot;otoroshi-api&quot;
    defaultValues {
      backOfficeGroupId = &quot;admin-api-group&quot;
      backOfficeApiKeyClientId = &quot;admin-api-apikey-id&quot;
      backOfficeApiKeyClientSecret = &quot;admin-api-apikey-secret&quot;
      backOfficeServiceId = &quot;admin-api-service&quot;
    }
  }
  claim {
    sharedKey = &quot;mysecret&quot;
  }
  filedb {
    path = &quot;./filedb/state.ndjson&quot;
  }
}

play.http {
  session {
    secure = false
    httpOnly = true
    maxAge = 2592000000
    domain = &quot;.oto.tools&quot;
    cookieName = &quot;oto-sess&quot;
  }
}
</code></pre>
<h2><a href="#reference-configuration" name="reference-configuration" class="anchor"><span class="anchor-link"></span></a>Reference configuration</h2>
<pre class="prettyprint"><code class="language-conf"><br/>app {
  storage = &quot;inmemory&quot; # the storage used by otoroshi. possible values are redis, inmemory, file, http, s3, cassandra, lettuce, experimental-pg             
  storage = ${?APP_STORAGE} # the storage used by otoroshi. possible values are redis, inmemory, file, http, s3, cassandra, lettuce, experimental-pg  
  storageRoot = &quot;otoroshi&quot; # the prefix used for storage keys
  storageRoot = ${?APP_STORAGE_ROOT} # the prefix used for storage keys
  eventsName = &quot;otoroshi&quot; # the name of the event producer
  eventsName = ${?APP_EVENTS_NAME} # the name of the event producer
  importFrom = ${?APP_IMPORT_FROM} # file path to import otoroshi initial configuration
  env = &quot;prod&quot; # env name, should always be prod except in dev mode
  env = ${?APP_ENV} # env name, should always be prod except in dev mode
  liveJs = false # enabled live JS loading for dev mode
  redirectToDev = false #not-used
  domain = &quot;oto.tools&quot; # default domain for basic otoroshi services
  domain = ${?APP_DOMAIN} # default domain for basic otoroshi services
  commitId = &quot;HEAD&quot;
  commitId = ${?COMMIT_ID}
  rootScheme = &quot;http&quot; # default root scheme when composing urls
  rootScheme = ${?APP_ROOT_SCHEME} # default root scheme when composing urls
  middleFingers = false #not-used
  middleFingers = ${?APP_MIDDLE_FINGERS} #not-used
  workers = 30 #not-used
  workers = ${?APP_WORKERS} #not-used
  throttlingWindow = 10 # the number of second used to compute throttling number
  throttlingWindow = ${?THROTTLING_WINDOW} # the number of second used to compute throttling number
  checkForUpdates = true # enable automatic version update checks
  checkForUpdates = ${?CHECK_FOR_UPDATES} # enable automatic version update checks
  overheadThreshold = 500.0 # the value threshold (in milliseconds) used to send HighOverheadAlert
  overheadThreshold = ${?OVERHEAD_THRESHOLD} # the value threshold (in milliseconds) used to send HighOverheadAlert
  adminLogin = ${?OTOROSHI_INITIAL_ADMIN_LOGIN} # the initial admin login
  adminPassword = ${?OTOROSHI_INITIAL_ADMIN_PASSWORD} # the initial admin password
  initialCustomization = ${?OTOROSHI_INITIAL_CUSTOMIZATION} # otoroshi inital configuration that will be merged with a new confguration. Shaped like an otoroshi export
  boot {
    globalWait = true # should we wait until everything is setup to accept http requests
    globalWait = ${?OTOROSHI_BOOT_GLOBAL_WAIT} # should we wait until everything is setup to accept http requests
    globalWaitTimeout = 60000 # max wait before accepting requests
    globalWaitTimeout = ${?OTOROSHI_BOOT_GLOBAL_WAIT_TIMEOUT} # max wait before accepting requests

    waitForPluginsSearch = true # should we wait for classpath plugins search before accepting http requests
    waitForPluginsSearch = ${?OTOROSHI_BOOT_WAIT_FOR_PLUGINS_SEARCH} # should we wait for classpath plugins search before accepting http requests
    waitForPluginsSearchTimeout = 20000 # max wait for classpath plugins search before accepting http requests
    waitForPluginsSearchTimeout = ${?OTOROSHI_BOOT_WAIT_FOR_PLUGINS_SEARCH_TIMEOUT} # max wait for classpath plugins search before accepting http requests

    waitForScriptsCompilation = true # should we wait for plugins compilation before accepting http requests
    waitForScriptsCompilation = ${?OTOROSHI_BOOT_WAIT_FOR_SCRIPTS_COMPILATION} # should we wait for plugins compilation before accepting http requests
    waitForScriptsCompilationTimeout = 30000 # max wait for plugins compilation before accepting http requests
    waitForScriptsCompilationTimeout = ${?OTOROSHI_BOOT_WAIT_FOR_SCRIPTS_COMPILATION_TIMEOUT} # max wait for plugins compilation before accepting http requests 

    waitForTlsInit = true # should we wait for first TLS context initialization before accepting http requests
    waitForTlsInit = ${?OTOROSHI_BOOT_WAIT_FOR_TLS_INIT} # should we wait for first TLS context initialization before accepting http requests
    waitForTlsInitTimeout = 10000 # max wait for first TLS context initialization before accepting http requests
    waitForTlsInitTimeout = ${?OTOROSHI_BOOT_WAIT_FOR_TLS_INIT_TIMEOUT} # max wait for first TLS context initialization before accepting http requests

    waitForFirstClusterFetch = true # should we wait for first cluster initialization before accepting http requests
    waitForFirstClusterFetch = ${?OTOROSHI_BOOT_WAIT_FOR_FIRST_CLUSTER_FETCH} # should we wait for first cluster initialization before accepting http requests
    waitForFirstClusterFetchTimeout = 10000 # max wait for first cluster initialization before accepting http requests
    waitForFirstClusterFetchTimeout = ${?OTOROSHI_BOOT_WAIT_FOR_FIRST_CLUSTER_TIMEOUT} # max wait for first cluster initialization before accepting http requests
  }
  instance {
    instanceId = ${?OTOROSHI_INSTANCE_ID} # the instance id
    number = 0 # the instance number. Can be found in otoroshi events
    number =  ${?OTOROSHI_INSTANCE_NUMBER} # the instance number. Can be found in otoroshi events
    number =  ${?INSTANCE_NUMBER} # the instance number. Can be found in otoroshi events
    name = &quot;otoroshi&quot; # instance name
    name = ${?OTOROSHI_INSTANCE_NAME} # instance name
    zone = &quot;local&quot; # instance zone (optional)
    zone = ${?OTOROSHI_INSTANCE_ZONE} # instance zone (optional)
    region = &quot;local&quot; # instance region (optional)
    region = ${?OTOROSHI_INSTANCE_REGION} # instance region (optional)
    dc = &quot;local&quot; # instance dc (optional)
    dc = ${?OTOROSHI_INSTANCE_DATACENTER} # instance dc (optional)
    provider = &quot;local&quot; # instance provider (optional)
    provider = ${?OTOROSHI_INSTANCE_PROVIDER} # instance provider (optional)
    rack = &quot;local&quot; # instance rack (optional)
    rack = ${?OTOROSHI_INSTANCE_RACK} # instance rack (optional)
    title = ${?OTOROSHI_INSTANCE_TITLE} # the title displayed in UI top left
  }
  proxy { #not-used
    keepAlive = true #not-used
    keepAlive = ${?PROXY_KEEPALIVE} #not-used
    compressionEnabled = false #not-used
    compressionEnabled = ${?PROXY_COMPRESSION_ENABLED} #not-used
    idleTimeout = 3600000 #not-used
    idleTimeout = ${?PROXY_IDLE_TIMEOUT} #not-used
    connectionTimeout = 120000 #not-used
    connectionTimeout = ${?PROXY_CONNECTION_TIMEOUT} #not-used
    requestTimeout = 3600000 #not-used
    requestTimeout = ${?PROXY_REQUEST_TIMEOUT} #not-used
    useAkkaClient = false #not-used
    useAkkaClient = ${?PROXY_USE_AKKA_CLIENT} #not-used
  }
  sidecar { #not-used
    serviceId = ${?SIDECAR_SERVICE_ID} #not-used
    target = ${?SIDECAR_TARGET} #not-used
    from = &quot;127.0.0.1&quot; #not-used
    from = ${?SIDECAR_FROM} #not-used
    strict = true #not-used
    strict = ${?SIDECAR_STRICT} #not-used
    apikey { #not-used
      clientId = ${?SIDECAR_APIKEY_CLIENT_ID} #not-used
    } #not-used
  } #not-used
  health {
    limit = 1000  # the value threshold (in milliseconds) used to indicate if an otoroshi instance is healthy or not
    limit = ${?HEALTH_LIMIT} # the value threshold (in milliseconds) used to indicate if an otoroshi instance is healthy or not
    accessKey = ${?HEALTH_ACCESS_KEY} # the key to access /health edpoint
  }
  snowflake {
    seed = 0 # the seed number used to generate unique ids. Should be different for every instances
    seed = ${?INSTANCE_NUMBER} # the seed number used to generate unique ids. Should be different for every instances
    seed = ${?SNOWFLAKE_SEED} # the seed number used to generate unique ids. Should be different for every instances
  }
  events {
    maxSize = 1000 # the amount of event kept in the datastore
    maxSize = ${?MAX_EVENTS_SIZE} # the amount of event kept in the datastore
  }
  exposed-ports {
    http = ${?APP_EXPOSED_PORTS_HTTP} # the exposed http port for otoroshi (when in a container or behind a proxy)
    http = ${?OTOROSHI_EXPOSED_PORTS_HTTP} # the exposed http port for otoroshi (when in a container or behind a proxy
    https = ${?APP_EXPOSED_PORTS_HTTPS} # the exposed https port for otoroshi (when in a container or behind a proxy
    https = ${?OTOROSHI_EXPOSED_PORTS_HTTPS} # the exposed https port for otoroshi (when in a container or behind a proxy
  }
  backoffice {
    exposed = true # expose the backoffice ui
    exposed = ${?APP_BACKOFFICE_EXPOSED} # expose the backoffice ui
    subdomain = &quot;otoroshi&quot; # the backoffice subdomain
    subdomain = ${?APP_BACKOFFICE_SUBDOMAIN} # the backoffice subdomain
    domains = []  # the backoffice domains
    domainsStr = ${?APP_BACKOFFICE_DOMAINS} # the backoffice domains
    domainsStr = ${?OTOROSHI_BACKOFFICE_DOMAINS} # the backoffice domains
    session {
      exp = 86400000 # the backoffice cookie expiration
      exp = ${?APP_BACKOFFICE_SESSION_EXP} # the backoffice cookie expiration
    }
  }
  privateapps {
    subdomain = &quot;privateapps&quot; # privateapps (proxy sso) domain
    subdomain = ${?APP_PRIVATEAPPS_SUBDOMAIN} # privateapps (proxy sso) domain
    domains = []
    domainsStr = ${?APP_PRIVATEAPPS_DOMAINS}
    domainsStr = ${?OTOROSHI_PRIVATEAPPS_DOMAINS}
    session {
      exp = 86400000 # the privateapps cookie expiration
      exp = ${?APP_PRIVATEAPPS_SESSION_EXP} # the privateapps cookie expiration
    }
  }
  adminapi {
    exposed = true # expose the admin api
    exposed = ${?ADMIN_API_EXPOSED} # expose the admin api
    targetSubdomain = &quot;otoroshi-admin-internal-api&quot; # admin api target subdomain as targeted by otoroshi service
    targetSubdomain = ${?ADMIN_API_TARGET_SUBDOMAIN} # admin api target subdomain as targeted by otoroshi service
    exposedSubdomain = &quot;otoroshi-api&quot; # admin api exposed subdomain as exposed by otoroshi service
    exposedSubdomain = ${?ADMIN_API_EXPOSED_SUBDOMAIN} # admin api exposed subdomain as exposed by otoroshi service
    additionalExposedDomain = ${?ADMIN_API_ADDITIONAL_EXPOSED_DOMAIN} # admin api additional exposed subdomain as exposed by otoroshi service
    domains = []
    domainsStr = ${?ADMIN_API_DOMAINS}
    domainsStr = ${?OTOROSHI_ADMIN_API_DOMAINS}
    exposedDomains = []
    exposedDomainsStr = ${?ADMIN_API_EXPOSED_DOMAINS}
    exposedDomainsStr = ${?OTOROSHI_ADMIN_API_EXPOSED_DOMAINS}
    defaultValues {
      backOfficeGroupId = &quot;admin-api-group&quot; # default value for admin api service group
      backOfficeGroupId = ${?ADMIN_API_GROUP} # default value for admin api service group
      backOfficeApiKeyClientId = &quot;admin-api-apikey-id&quot; # default value for admin api apikey id
      backOfficeApiKeyClientId = ${?ADMIN_API_CLIENT_ID}  # default value for admin api apikey id
      backOfficeApiKeyClientSecret = &quot;admin-api-apikey-secret&quot; # default value for admin api apikey secret
      backOfficeApiKeyClientSecret = ${?otoroshi.admin-api-secret} # default value for admin api apikey secret
      backOfficeApiKeyClientSecret = ${?ADMIN_API_CLIENT_SECRET} # default value for admin api apikey secret
      backOfficeServiceId = &quot;admin-api-service&quot; # default value for admin api service id
      backOfficeServiceId = ${?ADMIN_API_SERVICE_ID} # default value for admin api service id
    }
    proxy {
      https = false # backoffice proxy admin api over https
      https = ${?ADMIN_API_HTTPS} # backoffice proxy admin api over https
      local = true # backoffice proxy admin api on localhost
      local = ${?ADMIN_API_LOCAL} # backoffice proxy admin api on localhost
    }
  }
  claim {
    sharedKey = &quot;secret&quot; # the default secret used to sign otoroshi exchange protocol tokens
    sharedKey = ${?CLAIM_SHAREDKEY} # the default secret used to sign otoroshi exchange protocol tokens
  }
  webhooks {
    size = 100#not-used
    size = ${?WEBHOOK_SIZE}#not-used
  }
  redis { # configuration to fetch/store otoroshi state from a redis datastore using rediscala
    host = &quot;localhost&quot;
    host = ${?REDIS_HOST}
    port = 6379
    port = ${?REDIS_PORT}
    password = ${?REDIS_PASSWORD}
    windowSize = 99
    windowSize = ${?REDIS_WINDOW_SIZE}
    slaves = []
    slavesStr = ${?REDIS_SLAVES}
    slavesStr = ${?REDIS_MEMBERS}
    useScan = false
    useScan =  ${?REDIS_USE_SCAN}

    pool {
      members = []
      members = ${?REDIS_POOL_MEMBERS}
    }

    mpool {
      members = []
      membersStr = ${?REDIS_MPOOL_MEMBERS}
    }

    lf {
      master {
        host = ${?REDIS_LF_HOST}
        port = ${?REDIS_LF_PORT}
        password = ${?REDIS_LF_PASSWORD}
      }
      slaves = []
      slavesStr = ${?REDIS_LF_SLAVES}
      slavesStr = ${?REDIS_LF_MEMBERS}
    }

    sentinels {
      master = ${?REDIS_SENTINELS_MASTER}
      password = ${?REDIS_SENTINELS_PASSWORD}
      db = ${?REDIS_SENTINELS_DB}
      name = ${?REDIS_SENTINELS_NAME}
      members = []
      membersStr = ${?REDIS_SENTINELS_MEMBERS}

      lf {
        master = ${?REDIS_SENTINELS_LF_MASTER}
        members = []
        membersStr = ${?REDIS_SENTINELS_LF_MEMBERS}
      }
    }

    cluster {
      members = []
      membersStr = ${?REDIS_CLUSTER_MEMBERS}
    }

    lettuce { # configuration to fetch/store otoroshi state from a redis datastore using the lettuce driver (the next default one)
      connection = &quot;default&quot;
      connection = ${?REDIS_LETTUCE_CONNECTION}
      uri =  ${?REDIS_LETTUCE_URI}
      uri =  ${?REDIS_URL}
      uris = []
      urisStr = ${?REDIS_LETTUCE_URIS}
      readFrom = &quot;MASTER_PREFERRED&quot;
      readFrom = ${?REDIS_LETTUCE_READ_FROM}
      startTLS = false
      startTLS = ${?REDIS_LETTUCE_START_TLS}
      verifyPeers = true
      verifyPeers = ${?REDIS_LETTUCE_VERIFY_PEERS}
    }
  }
  inmemory { # configuration to fetch/store otoroshi state in memory
    windowSize = 99
    windowSize = ${?INMEMORY_WINDOW_SIZE}
    experimental = false
    experimental = ${?INMEMORY_EXPERIMENTAL_STORE}
    optimized = false
    optimized = ${?INMEMORY_OPTIMIZED}
  }
  leveldb { #not-used
    windowSize = 99 #not-used
    windowSize = ${?LEVELDB_WINDOW_SIZE} #not-used
    path = &quot;./leveldb&quot; #not-used
    path = ${?LEVELDB_PATH} #not-used
  } #not-used
  filedb { # configuration to fetch/store otoroshi state from a file
    windowSize = 99
    windowSize = ${?FILEDB_WINDOW_SIZE}
    path = &quot;./filedb/state.ndjson&quot;
    path = ${?FILEDB_PATH}
  }
  httpdb { # configuration to fetch/store otoroshi state from an http endpoint
    url = &quot;http://127.0.0.1:8888/worker-0/state.json&quot;
    headers = {}
    timeout = 10000
    pollEvery = 10000
  }
  s3db { # configuration to fetch/store otoroshi state from a S3 bucket
    bucket = &quot;otoroshi-states&quot;
    bucket = ${?OTOROSHI_DB_S3_BUCKET}
    endpoint = &quot;https://otoroshi-states.foo.bar&quot;
    endpoint = ${?OTOROSHI_DB_S3_ENDPOINT}
    region = &quot;eu-west-1&quot;
    region = ${?OTOROSHI_DB_S3_REGION}
    access = &quot;secret&quot;
    access = ${?OTOROSHI_DB_S3_ACCESS}
    secret = &quot;secret&quot;
    secret = ${?OTOROSHI_DB_S3_SECRET}
    key = &quot;/otoroshi/states/state&quot;
    key = ${?OTOROSHI_DB_S3_KEY}
    chunkSize = 8388608
    chunkSize = ${?OTOROSHI_DB_S3_CHUNK_SIZE}
    v4auth = true
    v4auth = ${?OTOROSHI_DB_S3_V4_AUTH}
    writeEvery = 60000 # write interval
    writeEvery = ${?OTOROSHI_DB_S3_WRITE_EVERY} # write interval
    acl = &quot;Private&quot;
    acl = ${?OTOROSHI_DB_S3_ACL}
  }
  pg { # postrgesql settings. everything possible with the client
    uri = ${?PG_URI}
    uri = ${?POSTGRESQL_ADDON_URI}
    poolSize = 20
    poolSize = ${?PG_POOL_SIZE}
    port = 5432
    port = ${?PG_PORT}
    host = &quot;localhost&quot;
    host = ${?PG_HOST}
    database = &quot;otoroshi&quot;
    database = ${?PG_DATABASE}
    user = &quot;otoroshi&quot;
    user = ${?PG_USER}
    password = &quot;otoroshi&quot;
    password = ${?PG_PASSWORD}
    logQueries = ${?PG_DEBUG_QUERIES}
    avoidJsonPath = false
    avoidJsonPath = ${?PG_AVOID_JSON_PATH}
    optimized = true
    optimized = ${?PG_OPTIMIZED}
    connect-timeout = ${?PG_CONNECT_TIMEOUT}
    idle-timeout = ${?PG_IDLE_TIMEOUT}
    log-activity = ${?PG_LOG_ACTIVITY}
    pipelining-limit = ${?PG_PIPELINING_LIMIT}
    ssl {
      enabled = false
      enabled = ${?PG_SSL_ENABLED}
      mode = &quot;verify_ca&quot;
      mode = ${?PG_SSL_MODE}
      trusted-certs-path = []
      trusted-certs = []
      trusted-cert-path = ${?PG_SSL_TRUSTED_CERT_PATH}
      trusted-cert = ${?PG_SSL_TRUSTED_CERT}
      client-certs-path = []
      client-certs = []
      client-cert-path = ${?PG_SSL_CLIENT_CERT_PATH}
      client-cert = ${?PG_SSL_CLIENT_CERT}
      trust-all = ${?PG_SSL_TRUST_ALL}
    }
  }
  cassandra { # cassandra settings. everything possible with the client
    windowSize = 99
    windowSize = ${?CASSANDRA_WINDOW_SIZE}
    host = &quot;127.0.0.1&quot;
    host = ${?CASSANDRA_HOST}
    port = 9042
    port = ${?CASSANDRA_PORT}
    replicationFactor = 1
    replicationFactor = ${?CASSANDRA_REPLICATION_FACTOR}
    replicationOptions = ${?CASSANDRA_REPLICATION_OPTIONS}
    durableWrites = true
    durableWrites = ${?CASSANDRA_DURABLE_WRITES}
    basic.contact-points = [ ${app.cassandra.host}&quot;:&quot;${app.cassandra.port} ]
    basic.session-name = &quot;otoroshi&quot;
    basic.session-name = ${?OTOROSHI_CASSANDRA_SESSION_NAME}
    basic.session-keyspace = ${?OTOROSHI_CASSANDRA_SESSION_KEYSPACE}
    basic.config-reload-interval = 5 minutes
    basic.request {
      timeout = 10 seconds
      consistency = LOCAL_ONE
      consistency = ${?OTOROSHI_CASSANDRA_CONSISTENCY}
      page-size = 5000
      page-size = ${?OTOROSHI_CASSANDRA_PAGE_SIZE}
      serial-consistency = SERIAL
      serial-consistency = ${?OTOROSHI_CASSANDRA_SERIAL_CONSISTENCY}
      default-idempotence = false
      default-idempotence = ${?OTOROSHI_CASSANDRA_DEFAULT_IDEMPOTENCE}
    }
    basic.load-balancing-policy {
      class = DefaultLoadBalancingPolicy
      local-datacenter = datacenter1
      local-datacenter = ${?OTOROSHI_CASSANDRA_LOCAL_DATACENTER}
      # filter.class=
      slow-replica-avoidance = true
    }
    basic.cloud {
      # secure-connect-bundle = /location/of/secure/connect/bundle
    }
    basic.application {
      # name =
      # version =
    }
    basic.graph {
      # name = your-graph-name
      traversal-source = &quot;g&quot;
      # is-system-query = false
      # read-consistency-level = LOCAL_QUORUM
      # write-consistency-level = LOCAL_ONE
      # timeout = 10 seconds
    }
    advanced.connection {
      connect-timeout = 5 seconds
      init-query-timeout = 500 milliseconds
      set-keyspace-timeout = ${datastax-java-driver.advanced.connection.init-query-timeout}
      pool {
        local {
          size = 1
        }
        remote {
          size = 1
        }
      }
      max-requests-per-connection = 1024
      max-orphan-requests = 256
      warn-on-init-error = true
    }
    advanced.reconnect-on-init = false
    advanced.reconnection-policy {
      class = ExponentialReconnectionPolicy
      base-delay = 1 second
      max-delay = 60 seconds
    }
    advanced.retry-policy {
      class = DefaultRetryPolicy
    }
    advanced.speculative-execution-policy {
      class = NoSpeculativeExecutionPolicy
      # max-executions = 3
      # delay = 100 milliseconds
    }
    advanced.auth-provider {
      # class = PlainTextAuthProvider
      username = ${?CASSANDRA_USERNAME}
      username = ${?OTOROSHI_CASSANDRA_USERNAME}
      password = ${?CASSANDRA_PASSWORD}
      password = ${?OTOROSHI_CASSANDRA_PASSWORD}
      authorization-id = ${?OTOROSHI_CASSANDRA_AUTHORIZATION_ID}
      //service = &quot;cassandra&quot;
      # login-configuration {
      #   principal = &quot;cassandra@DATASTAX.COM&quot;
      #   useKeyTab = &quot;true&quot;
      #   refreshKrb5Config = &quot;true&quot;
      #   keyTab = &quot;/path/to/keytab/file&quot;
      # }
      # sasl-properties {
      #   javax.security.sasl.qop = &quot;auth-conf&quot;
      # }
    }
    advanced.ssl-engine-factory {
      # class = DefaultSslEngineFactory
      # cipher-suites = [ &quot;TLS_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA&quot; ]
      # hostname-validation = true
      # truststore-path = /path/to/client.truststore
      # truststore-password = password123
      # keystore-path = /path/to/client.keystore
      # keystore-password = password123
    }
    advanced.timestamp-generator {
      class = AtomicTimestampGenerator
      drift-warning {
        threshold = 1 second
        interval = 10 seconds
      }
      force-java-clock = false
    }
    advanced.request-tracker {
      class = NoopRequestTracker
      logs {
        # success.enabled = true
        slow {
          # threshold = 1 second
          # enabled = true
        }
        # error.enabled = true
        # max-query-length = 500
        # show-values = true
        # max-value-length = 50
        # max-values = 50
        # show-stack-traces = true
      }
    }
    advanced.throttler {
      class = PassThroughRequestThrottler
      # max-queue-size = 10000
      # max-concurrent-requests = 10000
      # max-requests-per-second = 10000
      # drain-interval = 10 milliseconds
    }
    advanced.node-state-listener.class = NoopNodeStateListener
    advanced.schema-change-listener.class = NoopSchemaChangeListener
    advanced.address-translator {
      class = PassThroughAddressTranslator
    }
    advanced.resolve-contact-points = true
    advanced.protocol {
      version = V4
      version = ${?OTOROSHI_CASSANDRA_PROTOCOL_VERSION}
      compression = lz4
      compression = ${?OTOROSHI_CASSANDRA_PROTOCOL_COMPRESSION}
      max-frame-length = 256 MB
    }
    advanced.request {
      warn-if-set-keyspace = false
      trace {
        attempts = 5
        interval = 3 milliseconds
        consistency = ONE
      }
      log-warnings = true
    }
    advanced.graph {
      # sub-protocol = &quot;graphson-2.0&quot;
      paging-enabled = &quot;AUTO&quot;
      paging-options {
        page-size = ${datastax-java-driver.advanced.continuous-paging.page-size}
        max-pages = ${datastax-java-driver.advanced.continuous-paging.max-pages}
        max-pages-per-second = ${datastax-java-driver.advanced.continuous-paging.max-pages-per-second}
        max-enqueued-pages = ${datastax-java-driver.advanced.continuous-paging.max-enqueued-pages}
      }
    }
    advanced.continuous-paging {
      page-size = ${datastax-java-driver.basic.request.page-size}
      page-size-in-bytes = false
      max-pages = 0
      max-pages-per-second = 0
      max-enqueued-pages = 4
      timeout {
        first-page = 2 seconds
        other-pages = 1 second
      }
    }
    advanced.monitor-reporting {
      enabled = true
    }
    advanced.metrics {
      session {
        enabled = [
          # bytes-sent,
          # bytes-received
          # connected-nodes,
          # cql-requests,
          # cql-client-timeouts,
          # cql-prepared-cache-size,
          # throttling.delay,
          # throttling.queue-size,
          # throttling.errors,
          # continuous-cql-requests,
          # graph-requests,
          # graph-client-timeouts
        ]
        cql-requests {
          highest-latency = 3 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
        throttling.delay {
          highest-latency = 3 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
        continuous-cql-requests {
          highest-latency = 120 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
        graph-requests {
          highest-latency = 12 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
      }
      node {
        enabled = [
          # pool.open-connections,
          # pool.available-streams,
          # pool.in-flight,
          # pool.orphaned-streams,
          # bytes-sent,
          # bytes-received,
          # cql-messages,
          # errors.request.unsent,
          # errors.request.aborted,
          # errors.request.write-timeouts,
          # errors.request.read-timeouts,
          # errors.request.unavailables,
          # errors.request.others,
          # retries.total,
          # retries.aborted,
          # retries.read-timeout,
          # retries.write-timeout,
          # retries.unavailable,
          # retries.other,
          # ignores.total,
          # ignores.aborted,
          # ignores.read-timeout,
          # ignores.write-timeout,
          # ignores.unavailable,
          # ignores.other,
          # speculative-executions,
          # errors.connection.init,
          # errors.connection.auth,
          # graph-messages,
        ]
        cql-messages {
          highest-latency = 3 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
        graph-messages {
          highest-latency = 3 seconds
          significant-digits = 3
          refresh-interval = 5 minutes
        }
      }
    }
    advanced.socket {
      tcp-no-delay = true
      //keep-alive = false
      //reuse-address = true
      //linger-interval = 0
      //receive-buffer-size = 65535
      //send-buffer-size = 65535
    }
    advanced.heartbeat {
      interval = 30 seconds
      timeout = ${datastax-java-driver.advanced.connection.init-query-timeout}
    }
    advanced.metadata {
      topology-event-debouncer {
        window = 1 second
        max-events = 20
      }
      schema {
        enabled = true
        # refreshed-keyspaces = [ &quot;ks1&quot;, &quot;ks2&quot; ]
        request-timeout = ${datastax-java-driver.basic.request.timeout}
        request-page-size = ${datastax-java-driver.basic.request.page-size}
        debouncer {
          window = 1 second
          max-events = 20
        }
      }
      token-map.enabled = true
    }
    advanced.control-connection {
      timeout = ${datastax-java-driver.advanced.connection.init-query-timeout}
      schema-agreement {
        interval = 200 milliseconds
        timeout = 10 seconds
        warn-on-failure = true
      }
    }
    advanced.prepared-statements {
      prepare-on-all-nodes = true
      reprepare-on-up {
        enabled = true
        check-system-table = false
        max-statements = 0
        max-parallelism = 100
        timeout = ${datastax-java-driver.advanced.connection.init-query-timeout}
      }
    }
    advanced.netty {
      daemon = false
      io-group {
        size = 0
        shutdown {quiet-period = 2, timeout = 15, unit = SECONDS}
      }
      admin-group {
        size = 2
        shutdown {quiet-period = 2, timeout = 15, unit = SECONDS}
      }
      timer {
        tick-duration = 100 milliseconds
        ticks-per-wheel = 2048
      }
    }
    advanced.coalescer {
      max-runs-with-no-work = 5
      reschedule-interval = 10 microseconds
    }
  }
  mongo { #not-used
    uri = &quot;mongodb://localhost:27017/default&quot; #not-used
    uri = ${?MONGO_URI} #not-used
    windowSize = 99 #not-used
    windowSize = ${?CASSANDRA_WINDOW_SIZE} #not-used
  } #not-used
  kafka { #not-used
    host = &quot;127.0.0.1&quot; #not-used
    host = ${?KAFKA_HOST} #not-used
    port = &quot;9092&quot; #not-used
    port = ${?KAFKA_PORT} #not-used
    servers = ${app.kafka.host}&quot;:&quot;${app.kafka.port} #not-used
    servers = ${?KAFKA_HOSTS_AND_PORTS} #not-used
    groupId = &quot;otoroshi&quot; #not-used
    nbPartitions = 3 #not-used
    nbPartitions = ${?KAFKA_NB_PARTITIONS} #not-used
    keyPass = ${?KAFKA_PASSWORD} #not-used
    keystore { #not-used
      location = ${?KAFKA_KEYSTORE_LOCATION} #not-used
    } #not-used
    truststore { #not-used
      location = ${?KAFKA_TRUSTORE_LOCATION} #not-used
    } #not-used
  } #not-used
  actorsystems {
    otoroshi {
      akka { # otoroshi actorsystem configuration
        log-dead-letters-during-shutdown = false
        jvm-exit-on-fatal-error = false
        default-dispatcher {
          type = Dispatcher
          executor = &quot;fork-join-executor&quot;
          fork-join-executor {
            parallelism-factor = 4.0
            parallelism-min = 4
            parallelism-max = 64
            task-peeking-mode = &quot;FIFO&quot;
          }
          throughput = 1
        }
        http {
          parsing {
            max-uri-length             = 4k
            max-method-length          = 16
            max-response-reason-length = 64
            max-header-name-length     = 128
            max-header-value-length    = 16k
            max-header-count           = 128
            max-chunk-ext-length       = 256
            max-chunk-size             = 256m
            max-chunk-size             = ${?AKKA_HTTP_CLIENT_MAX_CHUNK_SIZE}
            max-content-length         = infinite
            max-content-length         = ${?AKKA_HTTP_CLIENT_MAX_CONTENT_LENGHT}
            max-to-strict-bytes        = infinite
            max-to-strict-bytes        = ${?AKKA_HTTP_CLIENT_MAX_TO_STRICT_BYTES}
          }
        }
      }
    }
    datastore {
      akka {
        log-dead-letters-during-shutdown = false
        jvm-exit-on-fatal-error = false
        default-dispatcher {
          type = Dispatcher
          executor = &quot;fork-join-executor&quot;
          fork-join-executor {
            parallelism-factor = 4.0
            parallelism-min = 4
            parallelism-max = 64
            task-peeking-mode = &quot;FIFO&quot;
          }
          throughput = 1
        }
      }
    }
  }
}

otoroshi {
  instance = ${app.instance} # instance name
  maintenanceMode = false # enable global maintenance mode
  maintenanceMode = ${?OTOROSHI_MAINTENANCE_MODE_ENABLED} # enable global maintenance mode
  secret = &quot;verysecretvaluethatyoumustoverwrite&quot; # the secret used to sign sessions
  secret = ${?OTOROSHI_SECRET}  # the secret used to sign sessions
  admin-api-secret = ${?OTOROSHI_ADMIN_API_SECRET}  # the secret for admin api
  options {
    bypassUserRightsCheck = false
    bypassUserRightsCheck = ${?OTOROSHI_OPTIONS_BYPASSUSERRIGHTSCHECK}
    emptyContentLengthIsChunked = true
    emptyContentLengthIsChunked = ${?OTOROSHI_OPTIONS_EMPTYCONTENTLENGTHISCHUNKED}
    detectApiKeySooner = true
    detectApiKeySooner = ${?OTOROSHI_OPTIONS_DETECTAPIKEYSOONER}
    sendClientChainAsPem = false
    sendClientChainAsPem = ${?OTOROSHI_OPTIONS_SENDCLIENTCHAINASPEM}
    useOldHeadersComposition = false
    useOldHeadersComposition = ${?OTOROSHI_OPTIONS_USEOLDHEADERSCOMPOSITION}
    manualDnsResolve = true
    manualDnsResolve = ${?OTOROSHI_OPTIONS_MANUALDNSRESOLVE}
    useEventStreamForScriptEvents = true
    useEventStreamForScriptEvents = ${?OTOROSHI_OPTIONS_USEEVENTSTREAMFORSCRIPTEVENTS}
    trustXForwarded = true
    trustXForwarded = ${?OTOROSHI_OPTIONS_TRUST_XFORWARDED}
    disableFunnyLogos = false
    disableFunnyLogos = ${?OTOROSHI_OPTIONS_DISABLE_FUNNY_LOGOS}
    staticExposedDomain = ${?OTOROSHI_OPTIONS_STATIC_EXPOSED_DOMAIN}
  }
  backoffice {
    flags {
      useAkkaHttpClient = false
      useAkkaHttpClient = ${?OTOROSHI_BACKOFFICE_FLAGS_USE_AKKA_HTTP_CLIENT}
      logUrl = false
      logUrl = ${?OTOROSHI_BACKOFFICE_FLAGS_LOG_URL}
      requestTimeout = 60000
      requestTimeout = ${?OTOROSHI_BACKOFFICE_FLAGS_REQUEST_TIMEOUT}
    }
  }
  sessions {
    secret = ${otoroshi.secret}
    secret = ${?OTOROSHI_SESSIONS_SECRET}
  }
  cache {
    enabled = false
    enabled = ${?USE_CACHE}
    enabled = ${?OTOROSHI_ENTITIES_CACHE_ENABLED}
    ttl = 2000
    ttl = ${?OTOROSHI_ENTITIES_CACHE_TTL}
  }
  metrics {
    enabled = true
    enabled = ${?OTOROSHI_METRICS_ENABLED}
    every = 30000
    every = ${?OTOROSHI_METRICS_EVERY}
    accessKey = ${?app.health.accessKey}
    accessKey = ${?OTOROSHI_METRICS_ACCESS_KEY}
  }
  plugins {
    packages = []
    packagesStr = ${?OTOROSHI_PLUGINS_SCAN_PACKAGES}
    print = false
    print = ${?OTOROSHI_PLUGINS_PRINT}
  }
  scripts {
    enabled = true # enable scripts
    enabled = ${?OTOROSHI_SCRIPTS_ENABLED} # enable scripts
    static { # settings for statically enabled script/plugins
      enabled = false
      enabled = ${?OTOROSHI_SCRIPTS_STATIC_ENABLED}
      transformersRefs = []
      transformersRefsStr = ${?OTOROSHI_SCRIPTS_STATIC_TRANSFORMER_REFS}
      transformersConfig = {}
      transformersConfigStr= ${?OTOROSHI_SCRIPTS_STATIC_TRANSFORMER_CONFIG}
      validatorRefs = []
      validatorRefsStr = ${?OTOROSHI_SCRIPTS_STATIC_VALIDATOR_REFS}
      validatorConfig = {}
      validatorConfigStr = ${?OTOROSHI_SCRIPTS_STATIC_VALIDATOR_CONFIG}
      preRouteRefs = []
      preRouteRefsStr = ${?OTOROSHI_SCRIPTS_STATIC_PRE_ROUTE_REFS}
      preRouteConfig = {}
      preRouteConfigStr = ${?OTOROSHI_SCRIPTS_STATIC_PRE_ROUTE_CONFIG}
      sinkRefs = []
      sinkRefsStr = ${?OTOROSHI_SCRIPTS_STATIC_SINK_REFS}
      sinkConfig = {}
      sinkConfigStr = ${?OTOROSHI_SCRIPTS_STATIC_SINK_CONFIG}
      jobsRefs = []
      jobsRefsStr = ${?OTOROSHI_SCRIPTS_STATIC_JOBS_REFS}
      jobsConfig = {}
      jobsConfigStr = ${?OTOROSHI_SCRIPTS_STATIC_JOBS_CONFIG}
    }
  }
  tls = ${otoroshi.ssl}
  ssl {
    # the cipher suites used by otoroshi TLS termination
    cipherSuitesJDK11 = [&quot;TLS_AES_128_GCM_SHA256&quot;, &quot;TLS_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_EMPTY_RENEGOTIATION_INFO_SCSV&quot;]
    cipherSuitesJDK8 = [&quot;TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_CBC_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_DHE_DSS_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_DHE_DSS_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;SSL_RSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA&quot;, &quot;SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA&quot;, &quot;TLS_EMPTY_RENEGOTIATION_INFO_SCSV&quot;]
    # cipherSuites = [&quot;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_RSA_WITH_AES_256_CBC_SHA&quot;, &quot;TLS_AES_128_GCM_SHA256&quot;, &quot;TLS_AES_256_GCM_SHA384&quot;]
    cipherSuites = []
    # the protocols used by otoroshi TLS termination
    protocolsJDK11 = [&quot;TLSv1.3&quot;, &quot;TLSv1.2&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1&quot;]
    protocolsJDK8 = [&quot;SSLv2Hello&quot;, &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;]
    # protocols = [&quot;TLSv1.3&quot;, &quot;TLSv1.2&quot;]
    protocols = []
    # the JDK cacert access
    cacert {
      path = &quot;$JAVA_HOME/lib/security/cacerts&quot;
      password = &quot;changeit&quot;
    }
    # the mtls mode
    fromOutside {
      clientAuth = &quot;None&quot;
      clientAuth = ${?SSL_OUTSIDE_CLIENT_AUTH}
    }
    # the default trust mode
    trust {
      all = false
      all = ${?OTOROSHI_SSL_TRUST_ALL}
    }
    # some initial cacert access, useful to include non standard CA when starting
    initialCacert = ${?CLUSTER_WORKER_INITIAL_CACERT}
    initialCacert = ${?INITIAL_CACERT}
    initialCert = ${?CLUSTER_WORKER_INITIAL_CERT}
    initialCert = ${?INITIAL_CERT}
    initialCertKey = ${?CLUSTER_WORKER_INITIAL_CERT_KEY}
    initialCertKey = ${?INITIAL_CERT_KEY}
    # initialCerts = []
    genWildcardCert = true #not-used
    genWildcardCert = ${?OTOROSHI_SSL_GEN_WILDCARD_CERT} #not-used
  }
  cluster {
    mode = &quot;off&quot; # can be &quot;off&quot;, &quot;leader&quot;, &quot;worker&quot;
    mode = ${?CLUSTER_MODE} # can be &quot;off&quot;, &quot;leader&quot;, &quot;worker&quot;
    compression = -1 # compression of the data sent between leader cluster and worker cluster. From -1 (disabled) to 9
    compression = ${?CLUSTER_COMPRESSION} # compression of the data sent between leader cluster and worker cluster. From -1 (disabled) to 9
    retryDelay = 300 # the delay before retrying a request to leader
    retryDelay = ${?CLUSTER_RETRY_DELAY} # the delay before retrying a request to leader
    retryFactor = 2 # the retry factor to avoid high load on failing nodes
    retryFactor = ${?CLUSTER_RETRY_FACTOR} # the retry factor to avoid high load on failing nodes
    selfAddress = ${?CLUSTER_SELF_ADDRESS} # the cluster slefAddress
    autoUpdateState = true # auto update cluster state with a job (mor efficient)
    autoUpdateState = ${?CLUSTER_AUTO_UPDATE_STATE} # auto update cluster state with a job (mor efficient
    mtls {
      # certs = []
      # trustedCerts = []
      enabled = false # enable mtls
      enabled = ${?CLUSTER_MTLS_ENABLED}  # enable mtls
      loose = false # loose verification
      loose = ${?CLUSTER_MTLS_LOOSE}  # loose verification
      trustAll = false # trust any CA
      trustAll = ${?CLUSTER_MTLS_TRUST_ALL} # trust any CA
    }
    leader {
      name = ${?CLUSTER_LEADER_NAME} # the leader name
      urls = [&quot;http://127.0.0.1:8080&quot;] # the leader urls
      url = ${?CLUSTER_LEADER_URL} # the leader url
      host = &quot;otoroshi-api.oto.tools&quot; # the leaders api hostname
      host = ${?CLUSTER_LEADER_HOST} # the leaders api hostname
      clientId = &quot;admin-api-apikey-id&quot; # the leaders apikey id to access otoroshi admin api
      clientId = ${?CLUSTER_LEADER_CLIENT_ID} # the leaders apikey id to access otoroshi admin api
      clientSecret = &quot;admin-api-apikey-secret&quot; # the leaders apikey secret to access otoroshi admin api
      clientSecret = ${?CLUSTER_LEADER_CLIENT_SECRET} # the leaders apikey secret to access otoroshi admin api
      groupingBy = 50 # items grouping when streaming state
      groupingBy = ${?CLUSTER_LEADER_GROUP_BY} # items grouping when streaming state
      cacheStateFor = 4000 # the ttl for local state cache
      cacheStateFor = ${?CLUSTER_LEADER_CACHE_STATE_FOR} # the ttl for local state cache
      stateDumpPath = ${?CLUSTER_LEADER_DUMP_PATH} # eventually a dump state path for debugging purpose
    }
    worker {
      name = ${?CLUSTER_WORKER_NAME} # the workers name
      retries = 3 # the number of retries when pushing quotas/pulling state
      retries = ${?CLUSTER_WORKER_RETRIES} # the number of retries when pushing quotas/pulling state
      timeout = 2000 # the workers timeout when interacting with leaders
      timeout = ${?CLUSTER_WORKER_TIMEOUT} # the workers timeout when interacting with leaders
      tenants = [] # the list of organization served by this worker. If none, it&#39;s all
      tenantsStr = ${?CLUSTER_WORKER_TENANTS} # the list (coma separated) of organization served by this worker. If none, it&#39;s all
      dbpath = ${?CLUSTER_WORKER_DB_PATH} # state dump path for debugging purpose
      dataStaleAfter = 600000 # the amount of time needed to consider state is stale
      dataStaleAfter = ${?CLUSTER_WORKER_DATA_STALE_AFTER} # the amount of time needed to consider state is stale
      swapStrategy = &quot;Merge&quot; # the internal memory store strategy, can be Replace or Merge
      swapStrategy = ${?CLUSTER_WORKER_SWAP_STRATEGY} # the internal memory store strategy, can be Replace or Merge
      state {
        retries = ${otoroshi.cluster.worker.retries} # the number of retries when pulling state
        retries = ${?CLUSTER_WORKER_STATE_RETRIES} # the number of retries when pulling state
        pollEvery = 10000 # polling interval
        pollEvery = ${?CLUSTER_WORKER_POLL_EVERY} # polling interval
        timeout = ${otoroshi.cluster.worker.timeout} # the workers timeout when polling state
        timeout = ${?CLUSTER_WORKER_POLL_TIMEOUT} # the workers timeout when polling state
      }
      quotas {
        retries = ${otoroshi.cluster.worker.retries} # the number of retries when pushing quotas
        retries = ${?CLUSTER_WORKER_QUOTAS_RETRIES} # the number of retries when pushing quotas
        pushEvery = 2000 # pushing interval
        pushEvery = ${?CLUSTER_WORKER_PUSH_EVERY} # pushing interval
        timeout = ${otoroshi.cluster.worker.timeout} # the workers timeout when pushing quotas
        timeout = ${?CLUSTER_WORKER_PUSH_TIMEOUT} # the workers timeout when pushing quotas
      }
    }
    analytics { # settings for the analytics actor system which is separated from otoroshi default one for performance reasons
      pressure {
        enabled = true
        enabled = ${?OTOROSHI_ANALYTICS_PRESSURE_ENABLED}
      }
      actorsystem {
        akka {
          log-dead-letters-during-shutdown = false
          jvm-exit-on-fatal-error = false
          default-dispatcher {
            type = Dispatcher
            executor = &quot;fork-join-executor&quot;
            fork-join-executor {
              parallelism-factor = 4.0
              parallelism-min = 4
              parallelism-max = 64
              task-peeking-mode = &quot;FIFO&quot;
            }
            throughput = 1
          }
          http {
            parsing {
              max-uri-length             = 4k
              max-method-length          = 16
              max-response-reason-length = 64
              max-header-name-length     = 128
              max-header-value-length    = 16k
              max-header-count           = 128
              max-chunk-ext-length       = 256
              max-chunk-size             = 256m
              max-chunk-size             = ${?AKKA_HTTP_CLIENT_ANALYTICS_MAX_CHUNK_SIZE}
              max-content-length         = infinite
              max-content-length         = ${?AKKA_HTTP_CLIENT_ANALYTICS_MAX_CONTENT_LENGHT}
              max-to-strict-bytes        = infinite
              max-to-strict-bytes        = ${?AKKA_HTTP_CLIENT_ANALYTICS_MAX_TO_STRICT_BYTES}
            }
          }
        }
      }
    }
  }
  headers { # the default headers value for specific otoroshi headers
    trace.label = &quot;Otoroshi-Viz-From-Label&quot;
    trace.from = &quot;Otoroshi-Viz-From&quot;
    trace.parent = &quot;Otoroshi-Parent-Request&quot;
    request.adminprofile = &quot;Otoroshi-Admin-Profile&quot;
    request.simpleapiclientid = &quot;x-api-key&quot;
    request.clientid = &quot;Otoroshi-Client-Id&quot;
    request.clientsecret = &quot;Otoroshi-Client-Secret&quot;
    request.id = &quot;Otoroshi-Request-Id&quot;
    request.timestamp = &quot;Otoroshi-Request-Timestamp&quot;
    request.bearer = &quot;Otoroshi-Token&quot;
    request.authorization = &quot;Otoroshi-Authorization&quot;
    response.proxyhost = &quot;Otoroshi-Proxied-Host&quot;
    response.error = &quot;Otoroshi-Error&quot;
    response.errormsg = &quot;Otoroshi-Error-Msg&quot;
    response.proxylatency = &quot;Otoroshi-Proxy-Latency&quot;
    response.upstreamlatency = &quot;Otoroshi-Upstream-Latency&quot;
    response.dailyquota = &quot;Otoroshi-Daily-Calls-Remaining&quot;
    response.monthlyquota = &quot;Otoroshi-Monthly-Calls-Remaining&quot;
    comm.state = &quot;Otoroshi-State&quot;
    comm.stateresp = &quot;Otoroshi-State-Resp&quot;
    comm.claim = &quot;Otoroshi-Claim&quot;
    healthcheck.test = &quot;Otoroshi-Health-Check-Logic-Test&quot;
    healthcheck.testresult = &quot;Otoroshi-Health-Check-Logic-Test-Result&quot;
    jwt.issuer = &quot;Otoroshi&quot;
    canary.tracker = &quot;Otoroshi-Canary-Id&quot;
    client.cert.chain = &quot;Otoroshi-Client-Cert-Chain&quot;

    request.jwtAuthorization = &quot;access_token&quot;
    request.bearerAuthorization = &quot;bearer_auth&quot;
    request.basicAuthorization = &quot;basic_auth&quot;
  }
  requests {
    validate = true
    validate = ${?OTOROSHI_REQUESTS_VALIDATE}
    maxUrlLength = ${akka.http.parsing.max-uri-length}
    maxCookieLength = ${akka.http.parsing.max-header-value-length}
    maxHeaderNameLength = ${akka.http.parsing.max-header-name-length}
    maxHeaderValueLength = ${akka.http.parsing.max-header-value-length}
  }
  jmx {
    enabled = false
    enabled = ${?OTOROSHI_JMX_ENABLED}
    port = 16000
    port = ${?OTOROSHI_JMX_PORT}
  }
  loggers {
  }
  provider {
    dashboardUrl = ${?OTOROSHI_PROVIDER_DASHBOARD_URL}
    jsUrl = ${?OTOROSHI_PROVIDER_JS_URL}
    cssUrl = ${?OTOROSHI_PROVIDER_CSS_URL}
    secret = &quot;secret&quot;
    secret = ${?OTOROSHI_PROVIDER_SECRET}
    title = &quot;Provider&#39;s dashboard&quot;
    title = ${?OTOROSHI_PROVIDER_TITLE}
  }
  healthcheck {
    workers = 4
    workers = ${?OTOROSHI_HEALTHCHECK_WORKERS}
    block-on-red = false
    block-on-red = ${?OTOROSHI_HEALTHCHECK_BLOCK_ON_RED}
    block-on-red = ${?OTOROSHI_HEALTHCHECK_BLOCK_ON_500}
    ttl = 60000
    ttl = ${?OTOROSHI_HEALTHCHECK_TTL}
    ttl-only = true
    ttl-only = ${?OTOROSHI_HEALTHCHECK_TTL_ONLY}
  }
}


http.port = 8080                       # the main http port for the otoroshi server
http.port = ${?PORT}                   # the main http port for the otoroshi server
play.server.http.port = ${http.port}   # the main http port for the otoroshi server
play.server.http.port = ${?PORT}       # the main http port for the otoroshi server
https.port = 8443                      # the main https port for the otoroshi server
https.port = ${?HTTPS_PORT}            # the main https port for the otoroshi server

play.server.https.engineProvider = &quot;otoroshi.ssl.DynamicSSLEngineProvider&quot;  # the module to handle TLS connections dynamically
play.server.https.keyStoreDumpPath = ${?HTTPS_KEYSTORE_DUMP_PATH}           # the file path where the TLSContext will be dumped (for debugging purposes only)

play.http.secret.key = ${otoroshi.secret}       # the secret used to signed session cookies                       
play.http.secret.key = ${?PLAY_CRYPTO_SECRET}   # the secret used to signed session cookies

play.server.http.idleTimeout = 3600s                              # the default server idle timeout
play.server.http.idleTimeout = ${?PLAY_SERVER_IDLE_TIMEOUT}       # the default server idle timeout
play.server.akka.requestTimeout = 3600s                           # the default server idle timeout (for akka server specifically)
play.server.akka.requestTimeout = ${?PLAY_SERVER_REQUEST_TIMEOUT} # the default server idle timeout (for akka server specifically)

http2.enabled = true               # enable HTTP2 support
http2.enabled = ${?HTTP2_ENABLED}  # enable HTTP2 support

play.server.https.keyStore.path=${?HTTPS_KEYSTORE_PATH}         # settings for the default server keystore
play.server.https.keyStore.type=${?HTTPS_KEYSTORE_TYPE}         # settings for the default server keystore
play.server.https.keyStore.password=${?HTTPS_KEYSTORE_PASSWORD} # settings for the default server keystore
play.server.https.keyStore.algorithm=${?HTTPS_KEYSTORE_ALGO}    # settings for the default server keystore
 
play.server.https.wantClientAuth = false                        # mTLS Want client auth settings (client cert COULD be provided) #not-used
play.server.https.wantClientAuth = ${?HTTPS_WANT_CLIENT_AUTH}   # mTLS Want client auth settings (client cert COULD be provided) #not-used
play.server.https.needClientAuth = false                        # mTLS Need client auth settings (client cert MUST be provided)  #not-used
play.server.https.needClientAuth = ${?HTTPS_NEED_CLIENT_AUTH}   # mTLS Need client auth settings (client cert MUST be provided)  #not-used

play.server.pidfile.path = &quot;/dev/null&quot;  # pid file path  #not-used

play.modules { #not-used
} #not-used

play.application.loader = &quot;otoroshi.loader.OtoroshiLoader&quot;  # the loader used to launch otoroshi

play.http {
  session {
    secure = false                    # the cookie for otoroshi backoffice should be exhanged over https only
    secure = ${?SESSION_SECURE_ONLY}  # the cookie for otoroshi backoffice should be exhanged over https only
    httpOnly = true                   # the cookie for otoroshi backoffice is not accessible from javascript
    maxAge = 259200000                # the cookie for otoroshi backoffice max age
    maxAge = ${?SESSION_MAX_AGE}      # the cookie for otoroshi backoffice max age
    domain = &quot;.&quot;${app.domain}         # the cookie for otoroshi backoffice domain
    domain = ${?SESSION_DOMAIN}       # the cookie for otoroshi backoffice domain
    cookieName = &quot;otoroshi-session&quot;   # the cookie for otoroshi backoffice name
    cookieName = ${?SESSION_NAME}     # the cookie for otoroshi backoffice name
  }
}

play.http.filters = play.api.http.NoHttpFilters #not-used
play.filters.enabled = [] #not-used

play.ws { #not-used
  useragent=&quot;Otoroshi-ahc&quot; #not-used
  useragent=${?USER_AGENT} #not-used
  ssl { #not-used
  } #not-used
} #not-used

play.cache { #not-used
} #not-used

akka { #not-used
  jvm-exit-on-fatal-error = off #not-used
} #not-used

play.akka { #not-used
  jvm-exit-on-fatal-error = off #not-used
} #not-used


akka { # akka specific configuration
  loglevel = ERROR
  logger-startup-timeout = 60s
  log-dead-letters-during-shutdown = false
  jvm-exit-on-fatal-error = false
  actor {
    default-dispatcher {
      type = Dispatcher
      executor = &quot;fork-join-executor&quot;
      fork-join-executor {     
        parallelism-factor = 4.0
        parallelism-min = 4
        parallelism-max = 64
        task-peeking-mode = &quot;FIFO&quot;
      }
      throughput = 1
    }
  }
  http {
    server {
      server-header = otoroshi
      max-connections = 2048
      remote-address-header = on
      raw-request-uri-header = on
      pipelining-limit = 64
      backlog = 512
      socket-options {
        so-receive-buffer-size = undefined
        so-send-buffer-size = undefined
        so-reuse-address = undefined
        so-traffic-class = undefined
        tcp-keep-alive = true
        tcp-oob-inline = undefined
        tcp-no-delay = undefined
      }
      http2 {
        request-entity-chunk-size = 65536 b
        incoming-connection-level-buffer-size = 10 MB
        incoming-stream-level-buffer-size = 512kB
      }
    }
    client {
      user-agent-header = Otoroshi-akka
      socket-options {
        so-receive-buffer-size = undefined
        so-send-buffer-size = undefined
        so-reuse-address = undefined
        so-traffic-class = undefined
        tcp-keep-alive = true
        tcp-oob-inline = undefined
        tcp-no-delay = undefined
      }
    }
    host-connection-pool {
      max-connections = 512
      max-open-requests = 1024
      pipelining-limit = 32
      client {
        user-agent-header = otoroshi
        socket-options {
          so-receive-buffer-size = undefined
          so-send-buffer-size = undefined
          so-reuse-address = undefined
          so-traffic-class = undefined
          tcp-keep-alive = true
          tcp-oob-inline = undefined
          tcp-no-delay = undefined
        }
      }
    }
    parsing {
      max-uri-length             = 4k
      max-method-length          = 16
      max-response-reason-length = 128
      max-header-name-length     = 128
      max-header-value-length    = 16k
      max-header-count           = 128
      max-chunk-ext-length       = 256
      max-chunk-size             = 256m
      max-chunk-size             = ${?AKKA_HTTP_SERVER_MAX_CHUNK_SIZE}
      max-content-length         = infinite
      max-content-length         = ${?AKKA_HTTP_SERVER_MAX_CONTENT_LENGHT}
    }
  }
}</code></pre>
<div class="nav-next">
<p><strong>Next:</strong> <a href="../firstrun/env.html">Config. with ENVs</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../firstrun/configfile.html#config-with-files" class="header">Config. with files</a>
  <ul>
    <li><a href="../firstrun/configfile.html#common-configuration" class="header">Common configuration</a></li>
    <li><a href="../firstrun/configfile.html#admin-api-configuration" class="header">Admin API configuration</a></li>
    <li><a href="../firstrun/configfile.html#secrets-config" class="header">Secrets config</a></li>
    <li><a href="../firstrun/configfile.html#db-configuration" class="header">DB configuration</a></li>
    <li><a href="../firstrun/configfile.html#headers-configuration" class="header">Headers configuration</a></li>
    <li><a href="../firstrun/configfile.html#play-specific-configuration" class="header">Play specific configuration</a></li>
    <li><a href="../firstrun/configfile.html#more-config-options" class="header">More config. options</a></li>
    <li><a href="../firstrun/configfile.html#example-of-a-custom-configuration-file" class="header">Example of a custom. configuration file</a></li>
    <li><a href="../firstrun/configfile.html#reference-configuration" class="header">Reference configuration</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2021</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.5/elasticlunr.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112498312-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-112498312-1');
</script>
</html>





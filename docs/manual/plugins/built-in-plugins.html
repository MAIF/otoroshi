<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Otoroshi built-in plugins · Otoroshi</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='otoroshi-manual'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/cc.js"></script>
<script type="text/javascript" src="../js/groups.js"></script>
<script type="text/javascript" src="../js/plugins.js"></script>
<script type="text/javascript" src="../js/ngplugins.js"></script>
<script type="text/javascript" src="../js/expression-language.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>
<link rel="stylesheet" type="text/css" href="../css/plugins.css"/>

<!--
<link rel="shortcut icon" href="../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Otoroshi
</a>
<div class="version-number">
1.5.16
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Otoroshi</a></li>
  <li><a href="../architecture.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../install/index.html" class="page">Install</a>
  <ul>
    <li><a href="../install/get-otoroshi.html" class="page">Get Otoroshi</a></li>
    <li><a href="../install/setup-otoroshi.html" class="page">Setup Otoroshi</a></li>
    <li><a href="../install/run-otoroshi.html" class="page">Run Otoroshi</a></li>
  </ul></li>
  <li><a href="../entities/index.html" class="page">Main entities</a>
  <ul>
    <li><a href="../entities/organizations.html" class="page">Organizations</a></li>
    <li><a href="../entities/teams.html" class="page">Teams</a></li>
    <li><a href="../entities/global-config.html" class="page">Global config</a></li>
    <li><a href="../entities/apikeys.html" class="page">Apikeys</a></li>
    <li><a href="../entities/service-groups.html" class="page">Service groups</a></li>
    <li><a href="../entities/service-descriptors.html" class="page">Service descriptors</a></li>
    <li><a href="../entities/auth-modules.html" class="page">Authentication modules</a></li>
    <li><a href="../entities/certificates.html" class="page">Certificates</a></li>
    <li><a href="../entities/jwt-verifiers.html" class="page">JWT verifiers</a></li>
    <li><a href="../entities/data-exporters.html" class="page">Data exporters</a></li>
    <li><a href="../entities/scripts.html" class="page">Scripts</a></li>
    <li><a href="../entities/tcp-services.html" class="page">TCP services</a></li>
  </ul></li>
  <li><a href="../topics/index.html" class="page">Detailed topics</a>
  <ul>
    <li><a href="../topics/chaos-engineering.html" class="page">Chaos engineering with the Snow Monkey</a></li>
    <li><a href="../topics/tls.html" class="page">TLS</a></li>
    <li><a href="../topics/pki.html" class="page">Otoroshi&rsquo;s PKI</a></li>
    <li><a href="../topics/monitoring.html" class="page">Monitoring</a></li>
    <li><a href="../topics/events-and-analytics.html" class="page">Events and analytics</a></li>
    <li><a href="../topics/dev-portal.html" class="page">Developer portal with Daikoku</a></li>
    <li><a href="../topics/sessions-mgmt.html" class="page">Sessions management</a></li>
    <li><a href="../topics/otoroshi-protocol.html" class="page">The Otoroshi communication protocol</a></li>
    <li><a href="../topics/expression-language.html" class="page">Expression language</a></li>
    <li><a href="../topics/user-rights.html" class="page">Otoroshi user rights</a></li>
  </ul></li>
  <li><a href="../how-to-s/index.html" class="page">How to&rsquo;s</a>
  <ul>
    <li><a href="../how-to-s/end-to-end-mtls.html" class="page">End-to-end mTLS</a></li>
    <li><a href="../how-to-s/export-alerts-using-mailgun.html" class="page">Send alerts using mailgun</a></li>
    <li><a href="../how-to-s/export-events-to-elastic.html" class="page">Export events to Elasticsearch</a></li>
    <li><a href="../how-to-s/import-export-otoroshi-datastore.html" class="page">Import and export Otoroshi datastore</a></li>
    <li><a href="../how-to-s/secure-app-with-auth0.html" class="page">Secure an app with Auth0</a></li>
    <li><a href="../how-to-s/secure-app-with-keycloak.html" class="page">Secure an app with Keycloak</a></li>
    <li><a href="../how-to-s/secure-app-with-ldap.html" class="page">Secure an app and/or your Otoroshi UI with LDAP</a></li>
    <li><a href="../how-to-s/secure-with-apikey.html" class="page">Secure an api with api keys</a></li>
    <li><a href="../how-to-s/secure-with-oauth1-client.html" class="page">Secure an app with OAuth1 client flow</a></li>
    <li><a href="../how-to-s/secure-with-oauth2-client-credentials.html" class="page">Secure an app with OAuth2 client_credential flow</a></li>
    <li><a href="../how-to-s/setup-otoroshi-cluster.html" class="page">Setup an Otoroshi cluster</a></li>
    <li><a href="../how-to-s/tls-using-lets-encrypt.html" class="page">TLS termination using Let&rsquo;s Encrypt</a></li>
    <li><a href="../how-to-s/secure-an-app-with-jwt-verifiers.html" class="page">Secure an api with jwt verifiers</a></li>
    <li><a href="../how-to-s/secure-the-communication-between-a-backend-app-and-otoroshi.html" class="page">Secure the communication between a backend app and Otoroshi</a></li>
    <li><a href="../how-to-s/tls-termination-using-own-certificates.html" class="page">TLS termination using your own certificates</a></li>
    <li><a href="../how-to-s/resources-loader.html" class="page">The resources loader</a></li>
    <li><a href="../how-to-s/custom-log-levels.html" class="page">Log levels customization</a></li>
    <li><a href="../how-to-s/custom-initial-state.html" class="page">Initial state customization</a></li>
    <li><a href="../how-to-s/communicate-with-kafka.html" class="page">Communicate with Kafka</a></li>
    <li><a href="../how-to-s/working-with-eureka.html" class="page">Working with Eureka</a></li>
  </ul></li>
  <li><a href="../plugins/index.html" class="page">Otoroshi plugins</a>
  <ul>
    <li><a href="../plugins/plugins.html" class="page">Otoroshi plugins system</a></li>
    <li><a href="../plugins/create-plugins.html" class="page">Create plugins</a></li>
    <li><a href="../plugins/built-in-plugins.html" class="active page">Otoroshi built-in plugins</a></li>
  </ul></li>
  <li><a href="../api.html" class="page">Admin REST API</a></li>
  <li><a href="../deploy/index.html" class="page">Deploy to production</a>
  <ul>
    <li><a href="../deploy/clustering.html" class="page">Otoroshi clustering</a></li>
    <li><a href="../deploy/kubernetes.html" class="page">Kubernetes</a></li>
    <li><a href="../deploy/clever-cloud.html" class="page">Clever-Cloud</a></li>
    <li><a href="../deploy/aws.html" class="page">AWS - Elastic Beanstalk</a></li>
    <li><a href="../deploy/scaling.html" class="page">Scaling Otoroshi</a></li>
  </ul></li>
  <li><a href="../dev.html" class="page">Developing Otoroshi</a></li>
  <li><a href="../next/index.html" class="page">Otoroshi new proxy engine</a>
  <ul>
    <li><a href="../next/engine.html" class="page">New proxy engine</a></li>
    <li><a href="../next/topics/index.html" class="page">Detailed topics</a></li>
    <li><a href="../next/built-in-plugins.html" class="page">Built-in plugins</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title-wrapper">
<div class="title-logo"></div>
<div class="title"><a href="../index.html">Otoroshi</a></div>
</div>
<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Otoroshi
</a>
<div class="version-number">
1.5.16
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Otoroshi</a></li>
  <li><a href="../architecture.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../getting-started.html" class="page">Getting Started</a></li>
  <li><a href="../install/index.html" class="page">Install</a>
  <ul>
    <li><a href="../install/get-otoroshi.html" class="page">Get Otoroshi</a></li>
    <li><a href="../install/setup-otoroshi.html" class="page">Setup Otoroshi</a></li>
    <li><a href="../install/run-otoroshi.html" class="page">Run Otoroshi</a></li>
  </ul></li>
  <li><a href="../entities/index.html" class="page">Main entities</a>
  <ul>
    <li><a href="../entities/organizations.html" class="page">Organizations</a></li>
    <li><a href="../entities/teams.html" class="page">Teams</a></li>
    <li><a href="../entities/global-config.html" class="page">Global config</a></li>
    <li><a href="../entities/apikeys.html" class="page">Apikeys</a></li>
    <li><a href="../entities/service-groups.html" class="page">Service groups</a></li>
    <li><a href="../entities/service-descriptors.html" class="page">Service descriptors</a></li>
    <li><a href="../entities/auth-modules.html" class="page">Authentication modules</a></li>
    <li><a href="../entities/certificates.html" class="page">Certificates</a></li>
    <li><a href="../entities/jwt-verifiers.html" class="page">JWT verifiers</a></li>
    <li><a href="../entities/data-exporters.html" class="page">Data exporters</a></li>
    <li><a href="../entities/scripts.html" class="page">Scripts</a></li>
    <li><a href="../entities/tcp-services.html" class="page">TCP services</a></li>
  </ul></li>
  <li><a href="../topics/index.html" class="page">Detailed topics</a>
  <ul>
    <li><a href="../topics/chaos-engineering.html" class="page">Chaos engineering with the Snow Monkey</a></li>
    <li><a href="../topics/tls.html" class="page">TLS</a></li>
    <li><a href="../topics/pki.html" class="page">Otoroshi&rsquo;s PKI</a></li>
    <li><a href="../topics/monitoring.html" class="page">Monitoring</a></li>
    <li><a href="../topics/events-and-analytics.html" class="page">Events and analytics</a></li>
    <li><a href="../topics/dev-portal.html" class="page">Developer portal with Daikoku</a></li>
    <li><a href="../topics/sessions-mgmt.html" class="page">Sessions management</a></li>
    <li><a href="../topics/otoroshi-protocol.html" class="page">The Otoroshi communication protocol</a></li>
    <li><a href="../topics/expression-language.html" class="page">Expression language</a></li>
    <li><a href="../topics/user-rights.html" class="page">Otoroshi user rights</a></li>
  </ul></li>
  <li><a href="../how-to-s/index.html" class="page">How to&rsquo;s</a>
  <ul>
    <li><a href="../how-to-s/end-to-end-mtls.html" class="page">End-to-end mTLS</a></li>
    <li><a href="../how-to-s/export-alerts-using-mailgun.html" class="page">Send alerts using mailgun</a></li>
    <li><a href="../how-to-s/export-events-to-elastic.html" class="page">Export events to Elasticsearch</a></li>
    <li><a href="../how-to-s/import-export-otoroshi-datastore.html" class="page">Import and export Otoroshi datastore</a></li>
    <li><a href="../how-to-s/secure-app-with-auth0.html" class="page">Secure an app with Auth0</a></li>
    <li><a href="../how-to-s/secure-app-with-keycloak.html" class="page">Secure an app with Keycloak</a></li>
    <li><a href="../how-to-s/secure-app-with-ldap.html" class="page">Secure an app and/or your Otoroshi UI with LDAP</a></li>
    <li><a href="../how-to-s/secure-with-apikey.html" class="page">Secure an api with api keys</a></li>
    <li><a href="../how-to-s/secure-with-oauth1-client.html" class="page">Secure an app with OAuth1 client flow</a></li>
    <li><a href="../how-to-s/secure-with-oauth2-client-credentials.html" class="page">Secure an app with OAuth2 client_credential flow</a></li>
    <li><a href="../how-to-s/setup-otoroshi-cluster.html" class="page">Setup an Otoroshi cluster</a></li>
    <li><a href="../how-to-s/tls-using-lets-encrypt.html" class="page">TLS termination using Let&rsquo;s Encrypt</a></li>
    <li><a href="../how-to-s/secure-an-app-with-jwt-verifiers.html" class="page">Secure an api with jwt verifiers</a></li>
    <li><a href="../how-to-s/secure-the-communication-between-a-backend-app-and-otoroshi.html" class="page">Secure the communication between a backend app and Otoroshi</a></li>
    <li><a href="../how-to-s/tls-termination-using-own-certificates.html" class="page">TLS termination using your own certificates</a></li>
    <li><a href="../how-to-s/resources-loader.html" class="page">The resources loader</a></li>
    <li><a href="../how-to-s/custom-log-levels.html" class="page">Log levels customization</a></li>
    <li><a href="../how-to-s/custom-initial-state.html" class="page">Initial state customization</a></li>
    <li><a href="../how-to-s/communicate-with-kafka.html" class="page">Communicate with Kafka</a></li>
    <li><a href="../how-to-s/working-with-eureka.html" class="page">Working with Eureka</a></li>
  </ul></li>
  <li><a href="../plugins/index.html" class="page">Otoroshi plugins</a>
  <ul>
    <li><a href="../plugins/plugins.html" class="page">Otoroshi plugins system</a></li>
    <li><a href="../plugins/create-plugins.html" class="page">Create plugins</a></li>
    <li><a href="../plugins/built-in-plugins.html" class="active page">Otoroshi built-in plugins</a></li>
  </ul></li>
  <li><a href="../api.html" class="page">Admin REST API</a></li>
  <li><a href="../deploy/index.html" class="page">Deploy to production</a>
  <ul>
    <li><a href="../deploy/clustering.html" class="page">Otoroshi clustering</a></li>
    <li><a href="../deploy/kubernetes.html" class="page">Kubernetes</a></li>
    <li><a href="../deploy/clever-cloud.html" class="page">Clever-Cloud</a></li>
    <li><a href="../deploy/aws.html" class="page">AWS - Elastic Beanstalk</a></li>
    <li><a href="../deploy/scaling.html" class="page">Scaling Otoroshi</a></li>
  </ul></li>
  <li><a href="../dev.html" class="page">Developing Otoroshi</a></li>
  <li><a href="../next/index.html" class="page">Otoroshi new proxy engine</a>
  <ul>
    <li><a href="../next/engine.html" class="page">New proxy engine</a></li>
    <li><a href="../next/topics/index.html" class="page">Detailed topics</a></li>
    <li><a href="../next/built-in-plugins.html" class="page">Built-in plugins</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../index.html">Otoroshi</a></li>
  <li><a href="../plugins/index.html">Otoroshi plugins</a></li>
  <li>Otoroshi built-in plugins</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#otoroshi-built-in-plugins" name="otoroshi-built-in-plugins" class="anchor"><span class="anchor-link"></span></a>Otoroshi built-in plugins</h1>
<p>Otoroshi provides some plugins out of the box. Here is the available plugins with their documentation and reference configuration</p><div id="otoroshi.plugins.accesslog.AccessLog" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#access-log-clf-" name="access-log-clf-" class="anchor"><span class="anchor-link"></span></a>Access log (CLF)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>AccessLog</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>With this plugin, any access to a service will be logged in CLF format.</p>
<p>Log format is the following:</p>
<p><code>&quot;$service&quot; $clientAddress - &quot;$userId&quot; [$timestamp] &quot;$host $method $path $protocol&quot; &quot;$status $statusTxt&quot; $size $snowflake &quot;$to&quot; &quot;$referer&quot; &quot;$userAgent&quot; $http $duration $errorMsg</code></p>
<p>The plugin accepts the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;AccessLog&quot;: {
    &quot;enabled&quot;: true,
    &quot;statuses&quot;: [], // list of status to enable logs, if none, log everything
    &quot;paths&quot;: [], // list of paths to enable logs, if none, log everything
    &quot;methods&quot;: [], // list of http methods to enable logs, if none, log everything
    &quot;identities&quot;: [] // list of identities to enable logs, if none, log everything
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;AccessLog&quot; : {
    &quot;enabled&quot; : true,
    &quot;statuses&quot; : [ ],
    &quot;paths&quot; : [ ],
    &quot;methods&quot; : [ ],
    &quot;identities&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.accesslog.AccessLogJson" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#access-log-json-" name="access-log-json-" class="anchor"><span class="anchor-link"></span></a>Access log (JSON)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>AccessLog</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>With this plugin, any access to a service will be logged in json format.</p>
<p>The plugin accepts the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;AccessLog&quot;: {
    &quot;enabled&quot;: true,
    &quot;statuses&quot;: [], // list of status to enable logs, if none, log everything
    &quot;paths&quot;: [], // list of paths to enable logs, if none, log everything
    &quot;methods&quot;: [], // list of http methods to enable logs, if none, log everything
    &quot;identities&quot;: [] // list of identities to enable logs, if none, log everything
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;AccessLog&quot; : {
    &quot;enabled&quot; : true,
    &quot;statuses&quot; : [ ],
    &quot;paths&quot; : [ ],
    &quot;methods&quot; : [ ],
    &quot;identities&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.accesslog.KafkaAccessLog" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#kafka-access-log" name="kafka-access-log" class="anchor"><span class="anchor-link"></span></a>Kafka access log</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>KafkaAccessLog</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>With this plugin, any access to a service will be logged as an event in a kafka topic.</p>
<p>The plugin accepts the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;KafkaAccessLog&quot;: {
    &quot;enabled&quot;: true,
    &quot;topic&quot;: &quot;otoroshi-access-log&quot;,
    &quot;statuses&quot;: [], // list of status to enable logs, if none, log everything
    &quot;paths&quot;: [], // list of paths to enable logs, if none, log everything
    &quot;methods&quot;: [], // list of http methods to enable logs, if none, log everything
    &quot;identities&quot;: [] // list of identities to enable logs, if none, log everything
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;KafkaAccessLog&quot; : {
    &quot;enabled&quot; : true,
    &quot;topic&quot; : &quot;otoroshi-access-log&quot;,
    &quot;statuses&quot; : [ ],
    &quot;paths&quot; : [ ],
    &quot;methods&quot; : [ ],
    &quot;identities&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.authcallers.BasicAuthCaller" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#basic-auth-caller" name="basic-auth-caller" class="anchor"><span class="anchor-link"></span></a>Basic Auth. caller</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>BasicAuthCaller</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be used to call api that are authenticated using basic auth.</p>
<p>This plugin accepts the following configuration</p>
<p>{  &ldquo;username&rdquo; : &ldquo;the_username&rdquo;,  &ldquo;password&rdquo; : &ldquo;the_password&rdquo;,  &ldquo;headerName&rdquo; : &ldquo;Authorization&rdquo;,  &ldquo;headerValueFormat&rdquo; : &ldquo;Basic %s&rdquo; }</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;username&quot; : &quot;the_username&quot;,
  &quot;password&quot; : &quot;the_password&quot;,
  &quot;headerName&quot; : &quot;Authorization&quot;,
  &quot;headerValueFormat&quot; : &quot;Basic %s&quot;
}
</code></pre></div><div id="otoroshi.plugins.authcallers.OAuth2Caller" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#oauth2-caller" name="oauth2-caller" class="anchor"><span class="anchor-link"></span></a>OAuth2 caller</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>OAuth2Caller</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be used to call api that are authenticated using OAuth2 client_credential/password flow. Do not forget to enable client retry to handle token generation on expire.</p>
<p>This plugin accepts the following configuration</p>
<p>{  &ldquo;kind&rdquo; : &ldquo;the oauth2 flow, can be &lsquo;client_credentials&rsquo; or &lsquo;password&rsquo;&rdquo;,  &ldquo;url&rdquo; : &ldquo;<a href="https://127.0.0.1:8080/oauth/token"">https://127.0.0.1:8080/oauth/token"</a>,  &rdquo;method&ldquo; : &rdquo;POST&ldquo;,  &rdquo;headerName&ldquo; : &rdquo;Authorization&ldquo;,  &rdquo;headerValueFormat&ldquo; : &rdquo;Bearer %s&ldquo;,  &rdquo;jsonPayload&ldquo; : false,  &rdquo;clientId&ldquo; : &rdquo;the client_id&ldquo;,  &rdquo;clientSecret&ldquo; : &rdquo;the client_secret&ldquo;,  &rdquo;scope&ldquo; : &rdquo;an optional scope&ldquo;,  &rdquo;audience&ldquo; : &rdquo;an optional audience&ldquo;,  &rdquo;user&ldquo; : &rdquo;an optional username if using password flow&ldquo;,  &rdquo;password&ldquo; : &rdquo;an optional password if using password flow&ldquo;,  &rdquo;cacheTokenSeconds&ldquo; : &rdquo;the number of second to wait before asking for a new token&ldquo;,  &rdquo;tlsConfig&ldquo; : &rdquo;an optional TLS settings object&quot; }</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;kind&quot; : &quot;the oauth2 flow, can be &#39;client_credentials&#39; or &#39;password&#39;&quot;,
  &quot;url&quot; : &quot;https://127.0.0.1:8080/oauth/token&quot;,
  &quot;method&quot; : &quot;POST&quot;,
  &quot;headerName&quot; : &quot;Authorization&quot;,
  &quot;headerValueFormat&quot; : &quot;Bearer %s&quot;,
  &quot;jsonPayload&quot; : false,
  &quot;clientId&quot; : &quot;the client_id&quot;,
  &quot;clientSecret&quot; : &quot;the client_secret&quot;,
  &quot;scope&quot; : &quot;an optional scope&quot;,
  &quot;audience&quot; : &quot;an optional audience&quot;,
  &quot;user&quot; : &quot;an optional username if using password flow&quot;,
  &quot;password&quot; : &quot;an optional password if using password flow&quot;,
  &quot;cacheTokenSeconds&quot; : &quot;the number of second to wait before asking for a new token&quot;,
  &quot;tlsConfig&quot; : &quot;an optional TLS settings object&quot;
}
</code></pre></div><div id="otoroshi.plugins.cache.ResponseCache" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#response-cache" name="response-cache" class="anchor"><span class="anchor-link"></span></a>Response Cache</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>ResponseCache</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can cache responses from target services in the otoroshi datasstore It also provides a debug UI at <code>/.well-known/otoroshi/bodylogger</code>.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;ResponseCache&quot;: {
    &quot;enabled&quot;: true, // enabled cache
    &quot;ttl&quot;: 300000,  // store it for some times (5 minutes by default)
    &quot;maxSize&quot;: 5242880, // max body size (body will be cut after that)
    &quot;autoClean&quot;: true, // cleanup older keys when all bigger than maxSize
    &quot;filter&quot;: { // cache only for some status, method and paths
      &quot;statuses&quot;: [],
      &quot;methods&quot;: [],
      &quot;paths&quot;: [],
      &quot;not&quot;: {
        &quot;statuses&quot;: [],
        &quot;methods&quot;: [],
        &quot;paths&quot;: []
      }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ResponseCache&quot; : {
    &quot;enabled&quot; : true,
    &quot;ttl&quot; : 3600000,
    &quot;maxSize&quot; : 52428800,
    &quot;autoClean&quot; : true,
    &quot;filter&quot; : {
      &quot;statuses&quot; : [ ],
      &quot;methods&quot; : [ ],
      &quot;paths&quot; : [ ],
      &quot;not&quot; : {
        &quot;statuses&quot; : [ ],
        &quot;methods&quot; : [ ],
        &quot;paths&quot; : [ ]
      }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.clientcert.ClientCertChainHeader" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#client-certificate-header" name="client-certificate-header" class="anchor"><span class="anchor-link"></span></a>Client certificate header</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>ClientCertChain</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin pass client certificate informations to the target in headers.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;ClientCertChain&quot;: {
    &quot;pem&quot;: { // send client cert as PEM format in a header
      &quot;send&quot;: false,
      &quot;header&quot;: &quot;X-Client-Cert-Pem&quot;
    },
    &quot;dns&quot;: { // send JSON array of DNs in a header
      &quot;send&quot;: false,
      &quot;header&quot;: &quot;X-Client-Cert-DNs&quot;
    },
    &quot;chain&quot;: { // send JSON representation of client cert chain in a header
      &quot;send&quot;: true,
      &quot;header&quot;: &quot;X-Client-Cert-Chain&quot;
    },
    &quot;claims&quot;: { // pass JSON representation of client cert chain in the otoroshi JWT token
      &quot;send&quot;: false,
      &quot;name&quot;: &quot;clientCertChain&quot;
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ClientCertChain&quot; : {
    &quot;pem&quot; : {
      &quot;send&quot; : false,
      &quot;header&quot; : &quot;X-Client-Cert-Pem&quot;
    },
    &quot;dns&quot; : {
      &quot;send&quot; : false,
      &quot;header&quot; : &quot;X-Client-Cert-DNs&quot;
    },
    &quot;chain&quot; : {
      &quot;send&quot; : true,
      &quot;header&quot; : &quot;X-Client-Cert-Chain&quot;
    },
    &quot;claims&quot; : {
      &quot;send&quot; : false,
      &quot;name&quot; : &quot;clientCertChain&quot;
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.defer.DeferPlugin" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#defer-responses" name="defer-responses" class="anchor"><span class="anchor-link"></span></a>Defer Responses</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>DeferPlugin</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will expect a <code>X-Defer</code> header or a <code>defer</code> query param and defer the response according to the value in milliseconds. This plugin is some kind of inside joke as one a our customer ask us to make slower apis.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;DeferPlugin&quot;: {
    &quot;defaultDefer&quot;: 0 // default defer in millis
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;DeferPlugin&quot; : {
    &quot;defaultDefer&quot; : 0
  }
}
</code></pre></div><div id="otoroshi.plugins.discovery.DiscoverySelfRegistrationTransformer" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#self-registration-endpoints-service-discovery-" name="self-registration-endpoints-service-discovery-" class="anchor"><span class="anchor-link"></span></a>Self registration endpoints (service discovery)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>DiscoverySelfRegistration</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin add support for self registration endpoint on a specific service.</p>
<p>This plugin accepts the following configuration:</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;DiscoverySelfRegistration&quot; : {
    &quot;hosts&quot; : [ ],
    &quot;targetTemplate&quot; : { },
    &quot;registrationTtl&quot; : 60000
  }
}
</code></pre></div><div id="otoroshi.plugins.envoy.EnvoyControlPlane" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#envoy-control-plane-experimental-" name="envoy-control-plane-experimental-" class="anchor"><span class="anchor-link"></span></a>Envoy Control Plane (experimental)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>EnvoyControlPlane</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will expose the otoroshi state to envoy instances using the xDS V3 API`.</p>
<p>Right now, all the features of otoroshi cannot be exposed as is through Envoy.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;EnvoyControlPlane&quot; : {
    &quot;enabled&quot; : true
  }
}
</code></pre></div><div id="otoroshi.plugins.geoloc.GeolocationInfoEndpoint" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#geolocation-endpoint" name="geolocation-endpoint" class="anchor"><span class="anchor-link"></span></a>Geolocation endpoint</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will expose current geolocation informations on the following endpoint.</p>
<p><code>/.well-known/otoroshi/plugins/geolocation</code></p></div><div id="otoroshi.plugins.geoloc.GeolocationInfoHeader" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#geolocation-header" name="geolocation-header" class="anchor"><span class="anchor-link"></span></a>Geolocation header</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>GeolocationInfoHeader</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will send informations extracted by the Geolocation details extractor to the target service in a header.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfoHeader&quot;: {
    &quot;headerName&quot;: &quot;X-Geolocation-Info&quot; // header in which info will be sent
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfoHeader&quot; : {
    &quot;headerName&quot; : &quot;X-Geolocation-Info&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.hmac.HMACCallerPlugin" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#hmac-caller-plugin" name="hmac-caller-plugin" class="anchor"><span class="anchor-link"></span></a>HMAC caller plugin</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>HMACCallerPlugin</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be used to call a &ldquo;protected&rdquo; api by an HMAC signature. It will adds a signature with the secret configured on the plugin.  The signature string will always the content of the header list listed in the plugin configuration.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HMACCallerPlugin&quot; : {
    &quot;secret&quot; : &quot;my-defaut-secret&quot;,
    &quot;algo&quot; : &quot;HMAC-SHA512&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.izanami.IzanamiCanary" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#izanami-canary-campaign" name="izanami-canary-campaign" class="anchor"><span class="anchor-link"></span></a>Izanami Canary Campaign</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>IzanamiCanary</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin allow you to perform canary testing based on an izanami experiment campaign (A/B test).</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;IzanamiCanary&quot; : {
    &quot;experimentId&quot; : &quot;foo:bar:qix&quot;,
    &quot;configId&quot; : &quot;foo:bar:qix:config&quot;,
    &quot;izanamiUrl&quot; : &quot;https://izanami.foo.bar&quot;,
    &quot;izanamiClientId&quot; : &quot;client&quot;,
    &quot;izanamiClientSecret&quot; : &quot;secret&quot;,
    &quot;timeout&quot; : 5000,
    &quot;mtls&quot; : {
      &quot;certs&quot; : [ ],
      &quot;trustedCerts&quot; : [ ],
      &quot;mtls&quot; : false,
      &quot;loose&quot; : false,
      &quot;trustAll&quot; : false
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;IzanamiCanary&quot; : {
    &quot;experimentId&quot; : &quot;foo:bar:qix&quot;,
    &quot;configId&quot; : &quot;foo:bar:qix:config&quot;,
    &quot;izanamiUrl&quot; : &quot;https://izanami.foo.bar&quot;,
    &quot;izanamiClientId&quot; : &quot;client&quot;,
    &quot;izanamiClientSecret&quot; : &quot;secret&quot;,
    &quot;timeout&quot; : 5000,
    &quot;mtls&quot; : {
      &quot;certs&quot; : [ ],
      &quot;trustedCerts&quot; : [ ],
      &quot;mtls&quot; : false,
      &quot;loose&quot; : false,
      &quot;trustAll&quot; : false
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.izanami.IzanamiProxy" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#izanami-apis-proxy" name="izanami-apis-proxy" class="anchor"><span class="anchor-link"></span></a>Izanami APIs Proxy</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>IzanamiProxy</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin exposes routes to proxy Izanami configuration and features tree APIs.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;IzanamiProxy&quot; : {
    &quot;path&quot; : &quot;/api/izanami&quot;,
    &quot;featurePattern&quot; : &quot;*&quot;,
    &quot;configPattern&quot; : &quot;*&quot;,
    &quot;autoContext&quot; : false,
    &quot;featuresEnabled&quot; : true,
    &quot;featuresWithContextEnabled&quot; : true,
    &quot;configurationEnabled&quot; : false,
    &quot;izanamiUrl&quot; : &quot;https://izanami.foo.bar&quot;,
    &quot;izanamiClientId&quot; : &quot;client&quot;,
    &quot;izanamiClientSecret&quot; : &quot;secret&quot;,
    &quot;timeout&quot; : 5000
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;IzanamiProxy&quot; : {
    &quot;path&quot; : &quot;/api/izanami&quot;,
    &quot;featurePattern&quot; : &quot;*&quot;,
    &quot;configPattern&quot; : &quot;*&quot;,
    &quot;autoContext&quot; : false,
    &quot;featuresEnabled&quot; : true,
    &quot;featuresWithContextEnabled&quot; : true,
    &quot;configurationEnabled&quot; : false,
    &quot;izanamiUrl&quot; : &quot;https://izanami.foo.bar&quot;,
    &quot;izanamiClientId&quot; : &quot;client&quot;,
    &quot;izanamiClientSecret&quot; : &quot;secret&quot;,
    &quot;timeout&quot; : 5000
  }
}
</code></pre></div><div id="otoroshi.plugins.jq.JqBodyTransformer" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#jq-bodies-transformer" name="jq-bodies-transformer" class="anchor"><span class="anchor-link"></span></a>JQ bodies transformer</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>JqBodyTransformer</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin let you transform JSON bodies (in requests and responses) using <a href="https://stedolan.github.io/jq/manual/#Basicfilters">JQ filters</a>.</p>
<p>Some JSON variables are accessible by default :</p>
<ul>
  <li><code>$url</code>: the request url</li>
  <li><code>$path</code>: the request path</li>
  <li><code>$domain</code>: the request domain</li>
  <li><code>$method</code>: the request method</li>
  <li><code>$headers</code>: the current request headers (with name in lowercase)</li>
  <li><code>$queryParams</code>: the current request query params</li>
  <li><code>$otoToken</code>: the otoroshi protocol token (if one)</li>
  <li><code>$inToken</code>: the first matched JWT token as is (from verifiers, if one)</li>
  <li><code>$token</code>: the first matched JWT token as is (from verifiers, if one)</li>
  <li><code>$user</code>: the current user (if one)</li>
  <li><code>$apikey</code>: the current apikey (if one)</li>
</ul>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;JqBodyTransformer&quot; : {
    &quot;request&quot; : {
      &quot;filter&quot; : &quot;.&quot;,
      &quot;included&quot; : [ ],
      &quot;excluded&quot; : [ ]
    },
    &quot;response&quot; : {
      &quot;filter&quot; : &quot;.&quot;,
      &quot;included&quot; : [ ],
      &quot;excluded&quot; : [ ]
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;JqBodyTransformer&quot; : {
    &quot;request&quot; : {
      &quot;filter&quot; : &quot;.&quot;,
      &quot;included&quot; : [ ],
      &quot;excluded&quot; : [ ]
    },
    &quot;response&quot; : {
      &quot;filter&quot; : &quot;.&quot;,
      &quot;included&quot; : [ ],
      &quot;excluded&quot; : [ ]
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.jsoup.HtmlPatcher" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#html-patcher" name="html-patcher" class="anchor"><span class="anchor-link"></span></a>Html Patcher</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>HtmlPatcher</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can inject elements in html pages (in the body or in the head) returned by the service</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HtmlPatcher&quot; : {
    &quot;appendHead&quot; : [ ],
    &quot;appendBody&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.log4j.Log4ShellFilter" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#log4shell-mitigation-plugin" name="log4shell-mitigation-plugin" class="anchor"><span class="anchor-link"></span></a>Log4Shell mitigation plugin</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>Log4ShellFilter</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin try to detect Log4Shell attacks in request and block them.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-javascript">{
  &quot;Log4ShellFilter&quot;: {
    &quot;status&quot;: 200, // the status send back when an attack expression is found
    &quot;body&quot;: &quot;&quot;, // the body send back when an attack expression is found
    &quot;parseBody&quot;: false // enables request body parsing to find attack expression
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;Log4ShellFilter&quot; : {
    &quot;status&quot; : 200,
    &quot;body&quot; : &quot;&quot;,
    &quot;parseBody&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.loggers.BodyLogger" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#body-logger" name="body-logger" class="anchor"><span class="anchor-link"></span></a>Body logger</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>BodyLogger</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can log body present in request and response. It can just logs it, store in in the redis store with a ttl and send it to analytics. It also provides a debug UI at <code>/.well-known/otoroshi/bodylogger</code>.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;BodyLogger&quot;: {
    &quot;enabled&quot;: true, // enabled logging
    &quot;log&quot;: true, // just log it
    &quot;store&quot;: false, // store bodies in datastore
    &quot;ttl&quot;: 300000,  // store it for some times (5 minutes by default)
    &quot;sendToAnalytics&quot;: false, // send bodies to analytics
    &quot;maxSize&quot;: 5242880, // max body size (body will be cut after that)
    &quot;password&quot;: &quot;password&quot;, // password for the ui, if none, it&#39;s public
    &quot;filter&quot;: { // log only for some status, method and paths
      &quot;statuses&quot;: [],
      &quot;methods&quot;: [],
      &quot;paths&quot;: [],
      &quot;not&quot;: {
        &quot;statuses&quot;: [],
        &quot;methods&quot;: [],
        &quot;paths&quot;: []
      }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;BodyLogger&quot; : {
    &quot;enabled&quot; : true,
    &quot;log&quot; : true,
    &quot;store&quot; : false,
    &quot;ttl&quot; : 300000,
    &quot;sendToAnalytics&quot; : false,
    &quot;maxSize&quot; : 5242880,
    &quot;password&quot; : &quot;password&quot;,
    &quot;filter&quot; : {
      &quot;statuses&quot; : [ ],
      &quot;methods&quot; : [ ],
      &quot;paths&quot; : [ ],
      &quot;not&quot; : {
        &quot;statuses&quot; : [ ],
        &quot;methods&quot; : [ ],
        &quot;paths&quot; : [ ]
      }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.metrics.PrometheusServiceMetrics" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#prometheus-service-metrics" name="prometheus-service-metrics" class="anchor"><span class="anchor-link"></span></a>Prometheus Service Metrics</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>PrometheusServiceMetrics</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin collects service metrics and can be used with the <code>Prometheus Endpoint</code> (in the Danger Zone) plugin to expose those metrics</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;PrometheusServiceMetrics&quot;: {
    &quot;includeUri&quot;: false // include http uri in metrics. WARNING this could impliess performance issues, use at your own risks
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;PrometheusServiceMetrics&quot; : {
    &quot;includeUri&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.metrics.ServiceMetrics" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#service-metrics" name="service-metrics" class="anchor"><span class="anchor-link"></span></a>Service Metrics</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>ServiceMetrics</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin expose service metrics in Otoroshi global metrics or on a special URL of the service <code>/.well-known/otoroshi/metrics</code>. Metrics are exposed in json or prometheus format depending on the accept header. You can protect it with an access key defined in the configuration</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;ServiceMetrics&quot;: {
    &quot;accessKeyValue&quot;: &quot;secret&quot;, // if not defined, public access. Can be ${config.app.health.accessKey}
    &quot;accessKeyQuery&quot;: &quot;access_key&quot;
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ServiceMetrics&quot; : {
    &quot;accessKeyValue&quot; : &quot;${config.app.health.accessKey}&quot;,
    &quot;accessKeyQuery&quot; : &quot;access_key&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.mirror.MirroringPlugin" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#mirroring-plugin" name="mirroring-plugin" class="anchor"><span class="anchor-link"></span></a>Mirroring plugin</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>MirroringPlugin</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will mirror every request to other targets</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;MirroringPlugin&quot;: {
    &quot;enabled&quot;: true, // enabled mirroring
    &quot;to&quot;: &quot;https://foo.bar.dev&quot;, // the url of the service to mirror
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;MirroringPlugin&quot; : {
    &quot;enabled&quot; : true,
    &quot;to&quot; : &quot;https://foo.bar.dev&quot;,
    &quot;captureResponse&quot; : false,
    &quot;generateEvents&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.oauth1.OAuth1CallerPlugin" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#oauth1-caller" name="oauth1-caller" class="anchor"><span class="anchor-link"></span></a>OAuth1 caller</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>OAuth1Caller</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be used to call api that are authenticated using OAuth1.  Consumer key, secret, and OAuth token et OAuth token secret can be pass through the metadata of an api key  or via the configuration of this plugin.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;OAuth1Caller&quot; : {
    &quot;algo&quot; : &quot;HmacSHA512&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.oidc.OIDCHeaders" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#oidc-headers" name="oidc-headers" class="anchor"><span class="anchor-link"></span></a>OIDC headers</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>OIDCHeaders</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin injects headers containing tokens and profile from current OIDC provider.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;OIDCHeaders&quot; : {
    &quot;profile&quot; : {
      &quot;send&quot; : true,
      &quot;headerName&quot; : &quot;X-OIDC-User&quot;
    },
    &quot;idtoken&quot; : {
      &quot;send&quot; : false,
      &quot;name&quot; : &quot;id_token&quot;,
      &quot;headerName&quot; : &quot;X-OIDC-Id-Token&quot;,
      &quot;jwt&quot; : true
    },
    &quot;accesstoken&quot; : {
      &quot;send&quot; : false,
      &quot;name&quot; : &quot;access_token&quot;,
      &quot;headerName&quot; : &quot;X-OIDC-Access-Token&quot;,
      &quot;jwt&quot; : true
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.security.SecurityTxt" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#security-txt" name="security-txt" class="anchor"><span class="anchor-link"></span></a>Security Txt</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>SecurityTxt</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin exposes a special route <code>/.well-known/security.txt</code> as proposed at <a href="https://securitytxt.org/">https://securitytxt.org/</a>.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;SecurityTxt&quot;: {
    &quot;Contact&quot;: &quot;contact@foo.bar&quot;, // mandatory, a link or e-mail address for people to contact you about security issues
    &quot;Encryption&quot;: &quot;http://url-to-public-key&quot;, // optional, a link to a key which security researchers should use to securely talk to you
    &quot;Acknowledgments&quot;: &quot;http://url&quot;, // optional, a link to a web page where you say thank you to security researchers who have helped you
    &quot;Preferred-Languages&quot;: &quot;en, fr, es&quot;, // optional
    &quot;Policy&quot;: &quot;http://url&quot;, // optional, a link to a policy detailing what security researchers should do when searching for or reporting security issues
    &quot;Hiring&quot;: &quot;http://url&quot;, // optional, a link to any security-related job openings in your organisation
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;SecurityTxt&quot; : {
    &quot;Contact&quot; : &quot;contact@foo.bar&quot;,
    &quot;Encryption&quot; : &quot;https://...&quot;,
    &quot;Acknowledgments&quot; : &quot;https://...&quot;,
    &quot;Preferred-Languages&quot; : &quot;en, fr&quot;,
    &quot;Policy&quot; : &quot;https://...&quot;,
    &quot;Hiring&quot; : &quot;https://...&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.static.StaticResponse" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#static-response" name="static-response" class="anchor"><span class="anchor-link"></span></a>Static Response</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>StaticResponse</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin returns a static response for any request</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;StaticResponse&quot; : {
    &quot;status&quot; : 200,
    &quot;headers&quot; : {
      &quot;Content-Type&quot; : &quot;application/json&quot;
    },
    &quot;body&quot; : &quot;{\&quot;message\&quot;:\&quot;hello world!\&quot;}&quot;,
    &quot;bodyBase64&quot; : null
  }
}
</code></pre></div><div id="otoroshi.plugins.useragent.UserAgentInfoEndpoint" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#user-agent-endpoint" name="user-agent-endpoint" class="anchor"><span class="anchor-link"></span></a>User-Agent endpoint</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will expose current user-agent informations on the following endpoint.</p>
<p><code>/.well-known/otoroshi/plugins/user-agent</code></p></div><div id="otoroshi.plugins.useragent.UserAgentInfoHeader" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#user-agent-header" name="user-agent-header" class="anchor"><span class="anchor-link"></span></a>User-Agent header</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>UserAgentInfoHeader</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will sent informations extracted by the User-Agent details extractor to the target service in a header.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;UserAgentInfoHeader&quot;: {
    &quot;headerName&quot;: &quot;X-User-Agent-Info&quot; // header in which info will be sent
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;UserAgentInfoHeader&quot; : {
    &quot;headerName&quot; : &quot;X-User-Agent-Info&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.workflow.WorkflowEndpoint" class="plugin plugin-hidden plugin-kind-transformer">
<h2><a href="#workflow-endpoint" name="workflow-endpoint" class="anchor"><span class="anchor-link"></span></a>Workflow endpoint</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>transformer</code></li>
  <li>configuration root: <code>WorkflowEndpoint</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin runs a workflow and return the response</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;WorkflowEndpoint&quot; : {
    &quot;workflow&quot; : { }
  }
}
</code></pre></div><div id="otoroshi.plugins.biscuit.BiscuitValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#biscuit-token-validator" name="biscuit-token-validator" class="anchor"><span class="anchor-link"></span></a>Biscuit token validator</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin validates a Biscuit token.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;publicKey&quot; : &quot;xxxxxx&quot;,
  &quot;checks&quot; : [ ],
  &quot;facts&quot; : [ ],
  &quot;resources&quot; : [ ],
  &quot;rules&quot; : [ ],
  &quot;revocation_ids&quot; : [ ],
  &quot;enforce&quot; : false,
  &quot;extractor&quot; : {
    &quot;type&quot; : &quot;header&quot;,
    &quot;name&quot; : &quot;Authorization&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.clientcert.HasClientCertMatchingApikeyValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#client-certificate-api-key-only" name="client-certificate-api-key-only" class="anchor"><span class="anchor-link"></span></a>Client Certificate + Api Key only</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Check if a client certificate is present in the request and that the apikey used matches the client certificate. You can set the client cert. DN in an apikey metadata named <code>allowed-client-cert-dn</code></p></div><div id="otoroshi.plugins.clientcert.HasClientCertMatchingHttpValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#client-certificate-matching-over-http-" name="client-certificate-matching-over-http-" class="anchor"><span class="anchor-link"></span></a>Client certificate matching (over http)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>HasClientCertMatchingHttpValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Check if client certificate matches the following configuration</p>
<p>expected response from http service is</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;serialNumbers&quot;: [],   // allowed certificated serial numbers
  &quot;subjectDNs&quot;: [],      // allowed certificated DNs
  &quot;issuerDNs&quot;: [],       // allowed certificated issuer DNs
  &quot;regexSubjectDNs&quot;: [], // allowed certificated DNs matching regex
  &quot;regexIssuerDNs&quot;: [],  // allowed certificated issuer DNs matching regex
}
</code></pre>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasClientCertMatchingValidator&quot;: {
    &quot;url&quot;: &quot;...&quot;,   // url for the call
    &quot;headers&quot;: {},  // http header for the call
    &quot;ttl&quot;: 600000,  // cache ttl,
    &quot;mtlsConfig&quot;: {
      &quot;certId&quot;: &quot;xxxxx&quot;,
       &quot;mtls&quot;: false,
       &quot;loose&quot;: false
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasClientCertMatchingHttpValidator&quot; : {
    &quot;url&quot; : &quot;http://foo.bar&quot;,
    &quot;ttl&quot; : 600000,
    &quot;headers&quot; : { },
    &quot;mtlsConfig&quot; : {
      &quot;certId&quot; : &quot;...&quot;,
      &quot;mtls&quot; : false,
      &quot;loose&quot; : false
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.clientcert.HasClientCertMatchingValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#client-certificate-matching" name="client-certificate-matching" class="anchor"><span class="anchor-link"></span></a>Client certificate matching</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>HasClientCertMatchingValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Check if client certificate matches the following configuration</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasClientCertMatchingValidator&quot;: {
    &quot;serialNumbers&quot;: [],   // allowed certificated serial numbers
    &quot;subjectDNs&quot;: [],      // allowed certificated DNs
    &quot;issuerDNs&quot;: [],       // allowed certificated issuer DNs
    &quot;regexSubjectDNs&quot;: [], // allowed certificated DNs matching regex
    &quot;regexIssuerDNs&quot;: [],  // allowed certificated issuer DNs matching regex
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasClientCertMatchingValidator&quot; : {
    &quot;serialNumbers&quot; : [ ],
    &quot;subjectDNs&quot; : [ ],
    &quot;issuerDNs&quot; : [ ],
    &quot;regexSubjectDNs&quot; : [ ],
    &quot;regexIssuerDNs&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.clientcert.HasClientCertValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#client-certificate-only" name="client-certificate-only" class="anchor"><span class="anchor-link"></span></a>Client Certificate Only</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Check if a client certificate is present in the request</p></div><div id="otoroshi.plugins.external.ExternalHttpValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#external-http-validator" name="external-http-validator" class="anchor"><span class="anchor-link"></span></a>External Http Validator</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>ExternalHttpValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Calls an external http service to know if a user has access or not. Uses cache for performances.</p>
<p>The sent payload is the following:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;apikey&quot;: {...},
  &quot;user&quot;: {...},
  &quot;service&quot;: : {...},
  &quot;chain&quot;: &quot;...&quot;,  // PEM cert chain
  &quot;fingerprints&quot;: [...]
}
</code></pre>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;ExternalHttpValidator&quot;: {
    &quot;url&quot;: &quot;...&quot;,                      // url for the http call
    &quot;host&quot;: &quot;...&quot;,                     // value of the host header for the call. default is host of the url
    &quot;goodTtl&quot;: 600000,                 // ttl in ms for a validated call
    &quot;badTtl&quot;: 60000,                   // ttl in ms for a not validated call
    &quot;method&quot;: &quot;POST&quot;,                  // http methode
    &quot;path&quot;: &quot;/certificates/_validate&quot;, // http uri path
    &quot;timeout&quot;: 10000,                  // http call timeout
    &quot;noCache&quot;: false,                  // use cache or not
    &quot;allowNoClientCert&quot;: false,        //
    &quot;headers&quot;: {},                      // headers for the http call if needed
    &quot;mtlsConfig&quot;: {
      &quot;certId&quot;: &quot;xxxxx&quot;,
       &quot;mtls&quot;: false,
       &quot;loose&quot;: false
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ExternalHttpValidator&quot; : {
    &quot;url&quot; : &quot;http://foo.bar&quot;,
    &quot;host&quot; : &quot;api.foo.bar&quot;,
    &quot;goodTtl&quot; : 600000,
    &quot;badTtl&quot; : 60000,
    &quot;method&quot; : &quot;POST&quot;,
    &quot;path&quot; : &quot;/certificates/_validate&quot;,
    &quot;timeout&quot; : 10000,
    &quot;noCache&quot; : false,
    &quot;allowNoClientCert&quot; : false,
    &quot;headers&quot; : { },
    &quot;mtlsConfig&quot; : {
      &quot;certId&quot; : &quot;...&quot;,
      &quot;mtls&quot; : false,
      &quot;loose&quot; : false
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.hmac.HMACValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#hmac-access-validator" name="hmac-access-validator" class="anchor"><span class="anchor-link"></span></a>HMAC access validator</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>HMACAccessValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be used to check if a HMAC signature is present and valid in Authorization header.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HMACAccessValidator&quot; : {
    &quot;secret&quot; : &quot;&quot;
  }
}
</code></pre>
<h3><a href="#documentation" name="documentation" class="anchor"><span class="anchor-link"></span></a>Documentation</h3>
<p>The HMAC signature needs to be set on the <code>Authorization</code> or <code>Proxy-Authorization</code> header.  The format of this header should be : <code>hmac algorithm=&quot;&lt;ALGORITHM&gt;&quot;, headers=&quot;&lt;HEADER&gt;&quot;, signature=&quot;&lt;SIGNATURE&gt;&quot;</code>  As example, a simple nodeJS call with the expected header  ```js  const crypto = require(&lsquo;crypto&rsquo;);  const fetch = require(&lsquo;node-fetch&rsquo;);</p>
<p>const date = new Date()  const secret = &ldquo;my-secret&rdquo; // equal to the api key secret by default</p>
<p>const algo = &ldquo;sha512&rdquo;  const signature = crypto.createHmac(algo, secret)  .update(date.getTime().toString())  .digest(&lsquo;base64&rsquo;);</p>
<p>fetch(&rsquo;<a href="http://myservice.oto.tools:9999/api/test'">http://myservice.oto.tools:9999/api/test'</a>, {  headers: {  &ldquo;Otoroshi-Client-Id&rdquo;: &ldquo;my-id&rdquo;,  &ldquo;Otoroshi-Client-Secret&rdquo;: &ldquo;my-secret&rdquo;,  &ldquo;Date&rdquo;: date.getTime().toString(),  &ldquo;Authorization&rdquo;: <code>hmac algorithm=&quot;hmac-${algo}&quot;, headers=&quot;Date&quot;, signature=&quot;${signature}&quot;</code>,  &ldquo;Accept&rdquo;: &ldquo;application/json&rdquo;  }  })  .then(r =&gt; r.json())  .then(console.log)  ```  In this example, we have an Otoroshi service deployed on <a href="http://myservice.oto.tools:9999/api/test">http://myservice.oto.tools:9999/api/test</a>, protected by api keys.  The secret used is the secret of the api key (by default, but you can change it and define a secret on the plugin configuration).  We send the base64 encoded date of the day, signed by the secret, in the Authorization header. We specify the headers signed and the type of algorithm used.  You can sign more than one header but you have to list them in the headers fields (each one separate by a space, example : headers=&ldquo;Date KeyId&rdquo;).  The algorithm used can be HMAC-SHA1, HMAC-SHA256, HMAC-SHA384 or HMAC-SHA512.</p></div><div id="otoroshi.plugins.oidc.OIDCAccessTokenValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#oidc-access-token-validator" name="oidc-access-token-validator" class="anchor"><span class="anchor-link"></span></a>OIDC access_token validator</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>OIDCAccessTokenValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will use the third party apikey configuration and apply it while keeping the apikey mecanism of otoroshi. Use it to combine apikey validation and OIDC access_token validation.</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;OIDCAccessTokenValidator&quot;: {
    &quot;enabled&quot;: true,
    &quot;atLeastOne&quot;: false,
    // config is optional and can be either an object config or an array of objects
    &quot;config&quot;: {
  &quot;enabled&quot; : true,
  &quot;quotasEnabled&quot; : true,
  &quot;uniqueApiKey&quot; : false,
  &quot;type&quot; : &quot;OIDC&quot;,
  &quot;oidcConfigRef&quot; : &quot;some-oidc-auth-module-id&quot;,
  &quot;localVerificationOnly&quot; : false,
  &quot;mode&quot; : &quot;Tmp&quot;,
  &quot;ttl&quot; : 0,
  &quot;headerName&quot; : &quot;Authorization&quot;,
  &quot;throttlingQuota&quot; : 100,
  &quot;dailyQuota&quot; : 10000000,
  &quot;monthlyQuota&quot; : 10000000,
  &quot;excludedPatterns&quot; : [ ],
  &quot;scopes&quot; : [ ],
  &quot;rolesPath&quot; : [ ],
  &quot;roles&quot; : [ ]
}
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;OIDCAccessTokenValidator&quot; : {
    &quot;enabled&quot; : true,
    &quot;atLeastOne&quot; : false,
    &quot;config&quot; : {
      &quot;enabled&quot; : true,
      &quot;quotasEnabled&quot; : true,
      &quot;uniqueApiKey&quot; : false,
      &quot;type&quot; : &quot;OIDC&quot;,
      &quot;oidcConfigRef&quot; : &quot;some-oidc-auth-module-id&quot;,
      &quot;localVerificationOnly&quot; : false,
      &quot;mode&quot; : &quot;Tmp&quot;,
      &quot;ttl&quot; : 0,
      &quot;headerName&quot; : &quot;Authorization&quot;,
      &quot;throttlingQuota&quot; : 100,
      &quot;dailyQuota&quot; : 10000000,
      &quot;monthlyQuota&quot; : 10000000,
      &quot;excludedPatterns&quot; : [ ],
      &quot;scopes&quot; : [ ],
      &quot;rolesPath&quot; : [ ],
      &quot;roles&quot; : [ ]
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.quotas.InstanceQuotas" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#instance-quotas" name="instance-quotas" class="anchor"><span class="anchor-link"></span></a>Instance quotas</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>InstanceQuotas</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will enforce global quotas on the current instance</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;InstanceQuotas&quot;: {
    &quot;callsPerDay&quot;: -1,     // max allowed api calls per day
    &quot;callsPerMonth&quot;: -1,   // max allowed api calls per month
    &quot;maxDescriptors&quot;: -1,  // max allowed service descriptors
    &quot;maxApiKeys&quot;: -1,      // max allowed apikeys
    &quot;maxGroups&quot;: -1,       // max allowed service groups
    &quot;maxScripts&quot;: -1,      // max allowed apikeys
    &quot;maxCertificates&quot;: -1, // max allowed certificates
    &quot;maxVerifiers&quot;: -1,    // max allowed jwt verifiers
    &quot;maxAuthModules&quot;: -1,  // max allowed auth modules
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;InstanceQuotas&quot; : {
    &quot;callsPerDay&quot; : -1,
    &quot;callsPerMonth&quot; : -1,
    &quot;maxDescriptors&quot; : -1,
    &quot;maxApiKeys&quot; : -1,
    &quot;maxGroups&quot; : -1,
    &quot;maxScripts&quot; : -1,
    &quot;maxCertificates&quot; : -1,
    &quot;maxVerifiers&quot; : -1,
    &quot;maxAuthModules&quot; : -1
  }
}
</code></pre></div><div id="otoroshi.plugins.quotas.ServiceQuotas" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#public-quotas" name="public-quotas" class="anchor"><span class="anchor-link"></span></a>Public quotas</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>ServiceQuotas</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will enforce public quotas on the current service</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ServiceQuotas&quot; : {
    &quot;throttlingQuota&quot; : 100,
    &quot;dailyQuota&quot; : 10000000,
    &quot;monthlyQuota&quot; : 10000000
  }
}
</code></pre></div><div id="otoroshi.plugins.users.HasAllowedUsersValidator" class="plugin plugin-hidden plugin-kind-validator">
<h2><a href="#allowed-users-only" name="allowed-users-only" class="anchor"><span class="anchor-link"></span></a>Allowed users only</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>validator</code></li>
  <li>configuration root: <code>HasAllowedUsersValidator</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin only let allowed users pass</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasAllowedUsersValidator&quot;: {
    &quot;usernames&quot;: [],   // allowed usernames
    &quot;emails&quot;: [],      // allowed user email addresses
    &quot;emailDomains&quot;: [], // allowed user email domains
    &quot;metadataMatch&quot;: [], // json path expressions to match against user metadata. passes if one match
    &quot;metadataNotMatch&quot;: [], // json path expressions to match against user metadata. passes if none match
    &quot;profileMatch&quot;: [], // json path expressions to match against user profile. passes if one match
    &quot;profileNotMatch&quot;: [], // json path expressions to match against user profile. passes if none match
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;HasAllowedUsersValidator&quot; : {
    &quot;usernames&quot; : [ ],
    &quot;emails&quot; : [ ],
    &quot;emailDomains&quot; : [ ],
    &quot;metadataMatch&quot; : [ ],
    &quot;metadataNotMatch&quot; : [ ],
    &quot;profileMatch&quot; : [ ],
    &quot;profileNotMatch&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.apikeys.ApikeyAuthModule" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#apikey-auth-module" name="apikey-auth-module" class="anchor"><span class="anchor-link"></span></a>Apikey auth module</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>ApikeyAuthModule</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin adds basic auth on service where credentials are valid apikeys on the current service.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ApikeyAuthModule&quot; : {
    &quot;realm&quot; : &quot;apikey-auth-module-realm&quot;,
    &quot;noneTagIn&quot; : [ ],
    &quot;oneTagIn&quot; : [ ],
    &quot;allTagsIn&quot; : [ ],
    &quot;noneMetaIn&quot; : [ ],
    &quot;oneMetaIn&quot; : [ ],
    &quot;allMetaIn&quot; : [ ],
    &quot;noneMetaKeysIn&quot; : [ ],
    &quot;oneMetaKeyIn&quot; : [ ],
    &quot;allMetaKeysIn&quot; : [ ]
  }
}
</code></pre></div><div id="otoroshi.plugins.apikeys.CertificateAsApikey" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#client-certificate-as-apikey" name="client-certificate-as-apikey" class="anchor"><span class="anchor-link"></span></a>Client certificate as apikey</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>CertificateAsApikey</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin uses client certificate as an apikey. The apikey will be stored for classic apikey usage</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;CertificateAsApikey&quot; : {
    &quot;readOnly&quot; : false,
    &quot;allowClientIdOnly&quot; : false,
    &quot;throttlingQuota&quot; : 100,
    &quot;dailyQuota&quot; : 10000000,
    &quot;monthlyQuota&quot; : 10000000,
    &quot;constrainedServicesOnly&quot; : false,
    &quot;tags&quot; : [ ],
    &quot;metadata&quot; : { }
  }
}
</code></pre></div><div id="otoroshi.plugins.apikeys.ClientCredentialFlowExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#client-credential-flow-apikey-extractor" name="client-credential-flow-apikey-extractor" class="anchor"><span class="anchor-link"></span></a>Client Credential Flow ApiKey extractor</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can extract an apikey from an opaque access_token generate by the <code>ClientCredentialFlow</code> plugin</p></div><div id="otoroshi.plugins.biscuit.BiscuitExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#apikey-from-biscuit-token-extractor" name="apikey-from-biscuit-token-extractor" class="anchor"><span class="anchor-link"></span></a>Apikey from Biscuit token extractor</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin extract an from a Biscuit token where the biscuit has an #authority fact &lsquo;client_id&rsquo; containing apikey client_id and an #authority fact &lsquo;client_sign&rsquo; that is the HMAC256 signature of the apikey client_id with the apikey client_secret</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;publicKey&quot; : &quot;xxxxxx&quot;,
  &quot;checks&quot; : [ ],
  &quot;facts&quot; : [ ],
  &quot;resources&quot; : [ ],
  &quot;rules&quot; : [ ],
  &quot;revocation_ids&quot; : [ ],
  &quot;enforce&quot; : false,
  &quot;extractor&quot; : {
    &quot;type&quot; : &quot;header&quot;,
    &quot;name&quot; : &quot;Authorization&quot;
  }
}
</code></pre></div><div id="otoroshi.plugins.discovery.DiscoveryTargetsSelector" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#service-discovery-target-selector-service-discovery-" name="service-discovery-target-selector-service-discovery-" class="anchor"><span class="anchor-link"></span></a>Service discovery target selector (service discovery)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>DiscoverySelfRegistration</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin select a target in the pool of discovered targets for this service. Use in combination with either <code>DiscoverySelfRegistrationSink</code> or <code>DiscoverySelfRegistrationTransformer</code> to make it work using the <code>self registration</code> pattern. Or use an implementation of <code>DiscoveryJob</code> for the <code>third party registration pattern</code>.</p>
<p>This plugin accepts the following configuration:</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;DiscoverySelfRegistration&quot; : {
    &quot;hosts&quot; : [ ],
    &quot;targetTemplate&quot; : { },
    &quot;registrationTtl&quot; : 60000
  }
}
</code></pre></div><div id="otoroshi.plugins.geoloc.IpStackGeolocationInfoExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#geolocation-details-extractor-using-ipstack-api-" name="geolocation-details-extractor-using-ipstack-api-" class="anchor"><span class="anchor-link"></span></a>Geolocation details extractor (using IpStack api)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>GeolocationInfo</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin extract geolocation informations from ip address using the <a href="https://ipstack.com/">IpStack dbs</a>. The informations are store in plugins attrs for other plugins to use</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfo&quot;: {
    &quot;apikey&quot;: &quot;xxxxxxx&quot;,
    &quot;timeout&quot;: 2000, // timeout in ms
    &quot;log&quot;: false // will log geolocation details
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfo&quot; : {
    &quot;apikey&quot; : &quot;xxxxxxx&quot;,
    &quot;timeout&quot; : 2000,
    &quot;log&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.geoloc.MaxMindGeolocationInfoExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#geolocation-details-extractor-using-maxmind-db-" name="geolocation-details-extractor-using-maxmind-db-" class="anchor"><span class="anchor-link"></span></a>Geolocation details extractor (using Maxmind db)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>GeolocationInfo</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin extract geolocation informations from ip address using the <a href="https://www.maxmind.com/en/geoip2-databases">Maxmind dbs</a>. The informations are store in plugins attrs for other plugins to use</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfo&quot;: {
    &quot;path&quot;: &quot;/foo/bar/cities.mmdb&quot;, // file path, can be &quot;global&quot;
    &quot;log&quot;: false // will log geolocation details
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;GeolocationInfo&quot; : {
    &quot;path&quot; : &quot;global&quot;,
    &quot;log&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.jwt.JwtUserExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#jwt-user-extractor" name="jwt-user-extractor" class="anchor"><span class="anchor-link"></span></a>Jwt user extractor</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>JwtUserExtractor</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin extract a user from a JWT token</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;JwtUserExtractor&quot; : {
    &quot;verifier&quot; : &quot;&quot;,
    &quot;strict&quot; : true,
    &quot;namePath&quot; : &quot;name&quot;,
    &quot;emailPath&quot; : &quot;email&quot;,
    &quot;metaPath&quot; : null
  }
}
</code></pre></div><div id="otoroshi.plugins.oidc.OIDCAccessTokenAsApikey" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#oidc-access-token-as-apikey" name="oidc-access-token-as-apikey" class="anchor"><span class="anchor-link"></span></a>OIDC access_token as apikey</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>OIDCAccessTokenAsApikey</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin will use the third party apikey configuration to generate an apikey</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;OIDCAccessTokenValidator&quot;: {
    &quot;enabled&quot;: true,
    &quot;atLeastOne&quot;: false,
    // config is optional and can be either an object config or an array of objects
    &quot;config&quot;: {
  &quot;enabled&quot; : true,
  &quot;quotasEnabled&quot; : true,
  &quot;uniqueApiKey&quot; : false,
  &quot;type&quot; : &quot;OIDC&quot;,
  &quot;oidcConfigRef&quot; : &quot;some-oidc-auth-module-id&quot;,
  &quot;localVerificationOnly&quot; : false,
  &quot;mode&quot; : &quot;Tmp&quot;,
  &quot;ttl&quot; : 0,
  &quot;headerName&quot; : &quot;Authorization&quot;,
  &quot;throttlingQuota&quot; : 100,
  &quot;dailyQuota&quot; : 10000000,
  &quot;monthlyQuota&quot; : 10000000,
  &quot;excludedPatterns&quot; : [ ],
  &quot;scopes&quot; : [ ],
  &quot;rolesPath&quot; : [ ],
  &quot;roles&quot; : [ ]
}
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;OIDCAccessTokenAsApikey&quot; : {
    &quot;enabled&quot; : true,
    &quot;atLeastOne&quot; : false,
    &quot;config&quot; : {
      &quot;enabled&quot; : true,
      &quot;quotasEnabled&quot; : true,
      &quot;uniqueApiKey&quot; : false,
      &quot;type&quot; : &quot;OIDC&quot;,
      &quot;oidcConfigRef&quot; : &quot;some-oidc-auth-module-id&quot;,
      &quot;localVerificationOnly&quot; : false,
      &quot;mode&quot; : &quot;Tmp&quot;,
      &quot;ttl&quot; : 0,
      &quot;headerName&quot; : &quot;Authorization&quot;,
      &quot;throttlingQuota&quot; : 100,
      &quot;dailyQuota&quot; : 10000000,
      &quot;monthlyQuota&quot; : 10000000,
      &quot;excludedPatterns&quot; : [ ],
      &quot;scopes&quot; : [ ],
      &quot;rolesPath&quot; : [ ],
      &quot;roles&quot; : [ ]
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.useragent.UserAgentExtractor" class="plugin plugin-hidden plugin-kind-preroute">
<h2><a href="#user-agent-details-extractor" name="user-agent-details-extractor" class="anchor"><span class="anchor-link"></span></a>User-Agent details extractor</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>preroute</code></li>
  <li>configuration root: <code>UserAgentInfo</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin extract informations from User-Agent header such as browsser version, OS version, etc. The informations are store in plugins attrs for other plugins to use</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;UserAgentInfo&quot;: {
    &quot;log&quot;: false // will log user-agent details
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;UserAgentInfo&quot; : {
    &quot;log&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.apikeys.ClientCredentialService" class="plugin plugin-hidden plugin-kind-sink">
<h2><a href="#client-credential-service" name="client-credential-service" class="anchor"><span class="anchor-link"></span></a>Client Credential Service</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>sink</code></li>
  <li>configuration root: <code>ClientCredentialService</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin add an an oauth client credentials service (<code>https://unhandleddomain/.well-known/otoroshi/oauth/token</code>) to create an access_token given a client id and secret.</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;ClientCredentialService&quot; : {
    &quot;domain&quot; : &quot;*&quot;,
    &quot;expiration&quot; : 3600000,
    &quot;defaultKeyPair&quot; : &quot;otoroshi-jwt-signing&quot;,
    &quot;secure&quot; : true
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ClientCredentialService&quot; : {
    &quot;domain&quot; : &quot;*&quot;,
    &quot;expiration&quot; : 3600000,
    &quot;defaultKeyPair&quot; : &quot;otoroshi-jwt-signing&quot;,
    &quot;secure&quot; : true
  }
}
</code></pre></div><div id="otoroshi.plugins.discovery.DiscoverySelfRegistrationSink" class="plugin plugin-hidden plugin-kind-sink">
<h2><a href="#global-self-registration-endpoints-service-discovery-" name="global-self-registration-endpoints-service-discovery-" class="anchor"><span class="anchor-link"></span></a>Global self registration endpoints (service discovery)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>sink</code></li>
  <li>configuration root: <code>DiscoverySelfRegistration</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin add support for self registration endpoint on specific hostnames.</p>
<p>This plugin accepts the following configuration:</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;DiscoverySelfRegistration&quot; : {
    &quot;hosts&quot; : [ ],
    &quot;targetTemplate&quot; : { },
    &quot;registrationTtl&quot; : 60000
  }
}
</code></pre></div><div id="otoroshi.plugins.jobs.kubernetes.KubernetesAdmissionWebhookCRDValidator" class="plugin plugin-hidden plugin-kind-sink">
<h2><a href="#kubernetes-admission-validator-webhook" name="kubernetes-admission-validator-webhook" class="anchor"><span class="anchor-link"></span></a>Kubernetes admission validator webhook</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>sink</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin exposes a webhook to kubernetes to handle manifests validation</p></div><div id="otoroshi.plugins.jobs.kubernetes.KubernetesAdmissionWebhookSidecarInjector" class="plugin plugin-hidden plugin-kind-sink">
<h2><a href="#kubernetes-sidecar-injector-webhook" name="kubernetes-sidecar-injector-webhook" class="anchor"><span class="anchor-link"></span></a>Kubernetes sidecar injector webhook</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>sink</code></li>
  <li>configuration root: <code>none</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin exposes a webhook to kubernetes to inject otoroshi-sidecar in pods</p></div><div id="otoroshi.plugins.metrics.PrometheusEndpoint" class="plugin plugin-hidden plugin-kind-sink">
<h2><a href="#prometheus-endpoint" name="prometheus-endpoint" class="anchor"><span class="anchor-link"></span></a>Prometheus Endpoint</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>sink</code></li>
  <li>configuration root: <code>PrometheusEndpoint</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin exposes metrics collected by <code>Prometheus Service Metrics</code> on a <code>/prometheus</code> endpoint. You can protect it with an access key defined in the configuration</p>
<p>This plugin can accept the following configuration</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;PrometheusEndpoint&quot;: {
    &quot;accessKeyValue&quot;: &quot;secret&quot;, // if not defined, public access. Can be ${config.app.health.accessKey}
    &quot;accessKeyQuery&quot;: &quot;access_key&quot;,
    &quot;includeMetrics&quot;: false
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;PrometheusEndpoint&quot; : {
    &quot;accessKeyValue&quot; : &quot;${config.app.health.accessKey}&quot;,
    &quot;accessKeyQuery&quot; : &quot;access_key&quot;,
    &quot;includeMetrics&quot; : false
  }
}
</code></pre></div><div id="otoroshi.plugins.jobs.kubernetes.KubernetesIngressControllerJob" class="plugin plugin-hidden plugin-kind-job">
<h2><a href="#kubernetes-ingress-controller" name="kubernetes-ingress-controller" class="anchor"><span class="anchor-link"></span></a>Kubernetes Ingress Controller</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>job</code></li>
  <li>configuration root: <code>KubernetesConfig</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin enables Otoroshi as an Ingress Controller</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.jobs.kubernetes.KubernetesOtoroshiCRDsControllerJob" class="plugin plugin-hidden plugin-kind-job">
<h2><a href="#kubernetes-otoroshi-crds-controller" name="kubernetes-otoroshi-crds-controller" class="anchor"><span class="anchor-link"></span></a>Kubernetes Otoroshi CRDs Controller</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>job</code></li>
  <li>configuration root: <code>KubernetesConfig</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin enables Otoroshi CRDs Controller</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.jobs.kubernetes.KubernetesToOtoroshiCertSyncJob" class="plugin plugin-hidden plugin-kind-job">
<h2><a href="#kubernetes-to-otoroshi-certs-synchronizer" name="kubernetes-to-otoroshi-certs-synchronizer" class="anchor"><span class="anchor-link"></span></a>Kubernetes to Otoroshi certs. synchronizer</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>job</code></li>
  <li>configuration root: <code>KubernetesConfig</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin syncs. TLS secrets from Kubernetes to Otoroshi</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.jobs.kubernetes.OtoroshiToKubernetesCertSyncJob" class="plugin plugin-hidden plugin-kind-job">
<h2><a href="#otoroshi-certs-to-kubernetes-secrets-synchronizer" name="otoroshi-certs-to-kubernetes-secrets-synchronizer" class="anchor"><span class="anchor-link"></span></a>Otoroshi certs. to Kubernetes secrets synchronizer</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>job</code></li>
  <li>configuration root: <code>KubernetesConfig</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin syncs. Otoroshi certs to Kubernetes TLS secrets</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;KubernetesConfig&quot; : {
    &quot;endpoint&quot; : &quot;https://kube.cluster.dev&quot;,
    &quot;token&quot; : &quot;xxx&quot;,
    &quot;userPassword&quot; : &quot;user:password&quot;,
    &quot;caCert&quot; : &quot;/var/run/secrets/kubernetes.io/serviceaccount/ca.crt&quot;,
    &quot;trust&quot; : false,
    &quot;namespaces&quot; : [ &quot;*&quot; ],
    &quot;labels&quot; : { },
    &quot;namespacesLabels&quot; : { },
    &quot;ingressClasses&quot; : [ &quot;otoroshi&quot; ],
    &quot;defaultGroup&quot; : &quot;default&quot;,
    &quot;ingresses&quot; : true,
    &quot;crds&quot; : true,
    &quot;coreDnsIntegration&quot; : false,
    &quot;coreDnsIntegrationDryRun&quot; : false,
    &quot;kubeLeader&quot; : false,
    &quot;restartDependantDeployments&quot; : true,
    &quot;useProxyState&quot; : false,
    &quot;watch&quot; : true,
    &quot;syncDaikokuApikeysOnly&quot; : false,
    &quot;kubeSystemNamespace&quot; : &quot;kube-system&quot;,
    &quot;coreDnsConfigMapName&quot; : &quot;coredns&quot;,
    &quot;coreDnsDeploymentName&quot; : &quot;coredns&quot;,
    &quot;corednsPort&quot; : 53,
    &quot;otoroshiServiceName&quot; : &quot;otoroshi-service&quot;,
    &quot;otoroshiNamespace&quot; : &quot;otoroshi&quot;,
    &quot;clusterDomain&quot; : &quot;cluster.local&quot;,
    &quot;syncIntervalSeconds&quot; : 60,
    &quot;coreDnsEnv&quot; : null,
    &quot;watchTimeoutSeconds&quot; : 60,
    &quot;watchGracePeriodSeconds&quot; : 5,
    &quot;mutatingWebhookName&quot; : &quot;otoroshi-admission-webhook-injector&quot;,
    &quot;validatingWebhookName&quot; : &quot;otoroshi-admission-webhook-validation&quot;,
    &quot;meshDomain&quot; : &quot;otoroshi.mesh&quot;,
    &quot;openshiftDnsOperatorIntegration&quot; : false,
    &quot;openshiftDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;openshiftDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;openshiftDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;kubeDnsOperatorIntegration&quot; : false,
    &quot;kubeDnsOperatorCoreDnsNamespace&quot; : &quot;otoroshi&quot;,
    &quot;kubeDnsOperatorCoreDnsName&quot; : &quot;otoroshi-dns&quot;,
    &quot;kubeDnsOperatorCoreDnsPort&quot; : 5353,
    &quot;templates&quot; : {
      &quot;service-group&quot; : { },
      &quot;service-descriptor&quot; : { },
      &quot;apikeys&quot; : { },
      &quot;global-config&quot; : { },
      &quot;jwt-verifier&quot; : { },
      &quot;tcp-service&quot; : { },
      &quot;certificate&quot; : { },
      &quot;auth-module&quot; : { },
      &quot;script&quot; : { },
      &quot;data-exporters&quot; : { },
      &quot;organizations&quot; : { },
      &quot;teams&quot; : { },
      &quot;admins&quot; : { },
      &quot;webhooks&quot; : { }
    }
  }
}
</code></pre></div><div id="otoroshi.plugins.workflow.WorkflowJob" class="plugin plugin-hidden plugin-kind-job">
<h2><a href="#workflow-job" name="workflow-job" class="anchor"><span class="anchor-link"></span></a>Workflow job</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>job</code></li>
  <li>configuration root: <code>WorkflowJob</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>Periodically run a custom workflow</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;WorkflowJob&quot; : {
    &quot;input&quot; : {
      &quot;namespace&quot; : &quot;otoroshi&quot;,
      &quot;service&quot; : &quot;otoroshi-dns&quot;
    },
    &quot;intervalMillis&quot; : &quot;60000&quot;,
    &quot;workflow&quot; : {
      &quot;name&quot; : &quot;some-workflow&quot;,
      &quot;description&quot; : &quot;a nice workflow&quot;,
      &quot;tasks&quot; : [ {
        &quot;name&quot; : &quot;call-dns&quot;,
        &quot;type&quot; : &quot;http&quot;,
        &quot;request&quot; : {
          &quot;method&quot; : &quot;PATCH&quot;,
          &quot;url&quot; : &quot;http://${env.KUBERNETES_SERVICE_HOST}:${env.KUBERNETES_SERVICE_PORT}/apis/v1/namespaces/${input.namespace}/services/${input.service}&quot;,
          &quot;headers&quot; : {
            &quot;accept&quot; : &quot;application/json&quot;,
            &quot;content-type&quot; : &quot;application/json&quot;,
            &quot;authorization&quot; : &quot;Bearer ${file:///var/run/secrets/kubernetes.io/serviceaccount/token}&quot;
          },
          &quot;tls&quot; : {
            &quot;mtls&quot; : true,
            &quot;trustAll&quot; : true
          },
          &quot;body&quot; : [ {
            &quot;op&quot; : &quot;replace&quot;,
            &quot;path&quot; : &quot;/spec/selector&quot;,
            &quot;value&quot; : {
              &quot;app&quot; : &quot;otoroshi&quot;,
              &quot;component&quot; : &quot;dns&quot;
            }
          } ]
        },
        &quot;success&quot; : {
          &quot;statuses&quot; : [ 200 ]
        }
      } ]
    }
  }
}
</code></pre></div><div id="otoroshi.next.proxy.ProxyEngine" class="plugin plugin-hidden plugin-kind-request-handler">
<h2><a href="#otoroshi-next-proxy-engine-experimental-" name="otoroshi-next-proxy-engine-experimental-" class="anchor"><span class="anchor-link"></span></a>Otoroshi next proxy engine (experimental)</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>request-handler</code></li>
  <li>configuration root: <code>NextGenProxyEngine</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin holds the next generation otoroshi proxy engine implementation. This engine is <strong>experimental</strong> and may not work as expected !</p>
<p>You can active this plugin only on some domain names so you can easily A/B test the new engine. The new proxy engine is designed to be more reactive and more efficient generally. It is also designed to be very efficient on path routing where it wasn&rsquo;t the old engines strong suit.</p>
<p>The idea is to only rely on plugins to work and avoid losing time with features that are not used in service descriptors. An automated conversion happens for every service descriptor. If the exposed domain is handled by this plugin, it will be served by this plugin. This plugin introduces new entities that will replace (one day maybe) service descriptors:</p>
<ul>
  <li><code>routes</code>: a unique routing rule based on hostname, path, method and headers that will execute a bunch of plugins</li>
  <li><code>services</code>: multiple routing rules based on hostname, path, method and headers that will execute the same list of plugins</li>
  <li><code>targets</code>: how to contact a backend either by using a domain name or an ip address, supports mtls</li>
  <li><code>backends</code>: a list of targets to contact a backend</li>
</ul>
<p>as an example, let say you want to use the new engine on your service exposed on <code>api.foo.bar/api</code>. To do that, just add the plugin in the <code>global plugins</code> section of the danger zone, inject the default configuration, enabled it and in <code>domains</code> add the value <code>api.foo.bar</code> (it is possible to use <code>*.foo.bar</code> if that&rsquo;s what you want to do). The next time a request hits the <code>api.foo.bar</code> domain, the new engine will handle it instead of the old one.</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;enabled&quot; : true,
  &quot;domains&quot; : [ &quot;*-next-gen.oto.tools&quot; ],
  &quot;deny_domains&quot; : [ ],
  &quot;reporting&quot; : true,
  &quot;merge_sync_steps&quot; : true,
  &quot;export_reporting&quot; : false,
  &quot;apply_legacy_checks&quot; : true,
  &quot;debug&quot; : false,
  &quot;capture&quot; : false,
  &quot;captureMaxEntitySize&quot; : 4194304,
  &quot;debug_headers&quot; : false,
  &quot;routing_strategy&quot; : &quot;tree&quot;
}
</code></pre></div><div id="otoroshi.script.ForwardTrafficHandler" class="plugin plugin-hidden plugin-kind-request-handler">
<h2><a href="#forward-traffic" name="forward-traffic" class="anchor"><span class="anchor-link"></span></a>Forward traffic</h2>
<img class="plugin-logo plugin-hidden" src=""></img>
<h3><a href="#infos" name="infos" class="anchor"><span class="anchor-link"></span></a>Infos</h3>
<ul>
  <li>plugin type: <code>request-handler</code></li>
  <li>configuration root: <code>ForwardTrafficHandler</code></li>
</ul>
<h3><a href="#description" name="description" class="anchor"><span class="anchor-link"></span></a>Description</h3>
<p>This plugin can be use to perform a raw traffic forward to an URL without passing through otoroshi routing</p>
<h3><a href="#default-configuration" name="default-configuration" class="anchor"><span class="anchor-link"></span></a>Default configuration</h3>
<pre class="prettyprint"><code class="language-json">{
  &quot;ForwardTrafficHandler&quot; : {
    &quot;domains&quot; : {
      &quot;my.domain.tld&quot; : {
        &quot;baseUrl&quot; : &quot;https://my.otherdomain.tld&quot;,
        &quot;secret&quot; : &quot;jwt signing secret&quot;,
        &quot;service&quot; : {
          &quot;id&quot; : &quot;service id for analytics&quot;,
          &quot;name&quot; : &quot;service name for analytics&quot;
        }
      }
    }
  }
}
</code></pre></div>
<div class="nav-next">
<p><strong>Next:</strong> <a href="../api.html">Admin REST API</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../plugins/built-in-plugins.html#otoroshi-built-in-plugins" class="header">Otoroshi built-in plugins</a>
  <ul>
    <li><a href="../plugins/built-in-plugins.html#access-log-clf-" class="header">Access log (CLF)</a></li>
    <li><a href="../plugins/built-in-plugins.html#access-log-json-" class="header">Access log (JSON)</a></li>
    <li><a href="../plugins/built-in-plugins.html#kafka-access-log" class="header">Kafka access log</a></li>
    <li><a href="../plugins/built-in-plugins.html#basic-auth-caller" class="header">Basic Auth. caller</a></li>
    <li><a href="../plugins/built-in-plugins.html#oauth2-caller" class="header">OAuth2 caller</a></li>
    <li><a href="../plugins/built-in-plugins.html#response-cache" class="header">Response Cache</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-header" class="header">Client certificate header</a></li>
    <li><a href="../plugins/built-in-plugins.html#defer-responses" class="header">Defer Responses</a></li>
    <li><a href="../plugins/built-in-plugins.html#self-registration-endpoints-service-discovery-" class="header">Self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/built-in-plugins.html#envoy-control-plane-experimental-" class="header">Envoy Control Plane (experimental)</a></li>
    <li><a href="../plugins/built-in-plugins.html#geolocation-endpoint" class="header">Geolocation endpoint</a></li>
    <li><a href="../plugins/built-in-plugins.html#geolocation-header" class="header">Geolocation header</a></li>
    <li><a href="../plugins/built-in-plugins.html#hmac-caller-plugin" class="header">HMAC caller plugin</a></li>
    <li><a href="../plugins/built-in-plugins.html#izanami-canary-campaign" class="header">Izanami Canary Campaign</a></li>
    <li><a href="../plugins/built-in-plugins.html#izanami-apis-proxy" class="header">Izanami APIs Proxy</a></li>
    <li><a href="../plugins/built-in-plugins.html#jq-bodies-transformer" class="header">JQ bodies transformer</a></li>
    <li><a href="../plugins/built-in-plugins.html#html-patcher" class="header">Html Patcher</a></li>
    <li><a href="../plugins/built-in-plugins.html#log4shell-mitigation-plugin" class="header">Log4Shell mitigation plugin</a></li>
    <li><a href="../plugins/built-in-plugins.html#body-logger" class="header">Body logger</a></li>
    <li><a href="../plugins/built-in-plugins.html#prometheus-service-metrics" class="header">Prometheus Service Metrics</a></li>
    <li><a href="../plugins/built-in-plugins.html#service-metrics" class="header">Service Metrics</a></li>
    <li><a href="../plugins/built-in-plugins.html#mirroring-plugin" class="header">Mirroring plugin</a></li>
    <li><a href="../plugins/built-in-plugins.html#oauth1-caller" class="header">OAuth1 caller</a></li>
    <li><a href="../plugins/built-in-plugins.html#oidc-headers" class="header">OIDC headers</a></li>
    <li><a href="../plugins/built-in-plugins.html#security-txt" class="header">Security Txt</a></li>
    <li><a href="../plugins/built-in-plugins.html#static-response" class="header">Static Response</a></li>
    <li><a href="../plugins/built-in-plugins.html#user-agent-endpoint" class="header">User-Agent endpoint</a></li>
    <li><a href="../plugins/built-in-plugins.html#user-agent-header" class="header">User-Agent header</a></li>
    <li><a href="../plugins/built-in-plugins.html#workflow-endpoint" class="header">Workflow endpoint</a></li>
    <li><a href="../plugins/built-in-plugins.html#biscuit-token-validator" class="header">Biscuit token validator</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-api-key-only" class="header">Client Certificate + Api Key only</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-matching-over-http-" class="header">Client certificate matching (over http)</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-matching" class="header">Client certificate matching</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-only" class="header">Client Certificate Only</a></li>
    <li><a href="../plugins/built-in-plugins.html#external-http-validator" class="header">External Http Validator</a></li>
    <li><a href="../plugins/built-in-plugins.html#hmac-access-validator" class="header">HMAC access validator</a></li>
    <li><a href="../plugins/built-in-plugins.html#oidc-access-token-validator" class="header">OIDC access_token validator</a></li>
    <li><a href="../plugins/built-in-plugins.html#instance-quotas" class="header">Instance quotas</a></li>
    <li><a href="../plugins/built-in-plugins.html#public-quotas" class="header">Public quotas</a></li>
    <li><a href="../plugins/built-in-plugins.html#allowed-users-only" class="header">Allowed users only</a></li>
    <li><a href="../plugins/built-in-plugins.html#apikey-auth-module" class="header">Apikey auth module</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-certificate-as-apikey" class="header">Client certificate as apikey</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-credential-flow-apikey-extractor" class="header">Client Credential Flow ApiKey extractor</a></li>
    <li><a href="../plugins/built-in-plugins.html#apikey-from-biscuit-token-extractor" class="header">Apikey from Biscuit token extractor</a></li>
    <li><a href="../plugins/built-in-plugins.html#service-discovery-target-selector-service-discovery-" class="header">Service discovery target selector (service discovery)</a></li>
    <li><a href="../plugins/built-in-plugins.html#geolocation-details-extractor-using-ipstack-api-" class="header">Geolocation details extractor (using IpStack api)</a></li>
    <li><a href="../plugins/built-in-plugins.html#geolocation-details-extractor-using-maxmind-db-" class="header">Geolocation details extractor (using Maxmind db)</a></li>
    <li><a href="../plugins/built-in-plugins.html#jwt-user-extractor" class="header">Jwt user extractor</a></li>
    <li><a href="../plugins/built-in-plugins.html#oidc-access-token-as-apikey" class="header">OIDC access_token as apikey</a></li>
    <li><a href="../plugins/built-in-plugins.html#user-agent-details-extractor" class="header">User-Agent details extractor</a></li>
    <li><a href="../plugins/built-in-plugins.html#client-credential-service" class="header">Client Credential Service</a></li>
    <li><a href="../plugins/built-in-plugins.html#global-self-registration-endpoints-service-discovery-" class="header">Global self registration endpoints (service discovery)</a></li>
    <li><a href="../plugins/built-in-plugins.html#kubernetes-admission-validator-webhook" class="header">Kubernetes admission validator webhook</a></li>
    <li><a href="../plugins/built-in-plugins.html#kubernetes-sidecar-injector-webhook" class="header">Kubernetes sidecar injector webhook</a></li>
    <li><a href="../plugins/built-in-plugins.html#prometheus-endpoint" class="header">Prometheus Endpoint</a></li>
    <li><a href="../plugins/built-in-plugins.html#kubernetes-ingress-controller" class="header">Kubernetes Ingress Controller</a></li>
    <li><a href="../plugins/built-in-plugins.html#kubernetes-otoroshi-crds-controller" class="header">Kubernetes Otoroshi CRDs Controller</a></li>
    <li><a href="../plugins/built-in-plugins.html#kubernetes-to-otoroshi-certs-synchronizer" class="header">Kubernetes to Otoroshi certs. synchronizer</a></li>
    <li><a href="../plugins/built-in-plugins.html#otoroshi-certs-to-kubernetes-secrets-synchronizer" class="header">Otoroshi certs. to Kubernetes secrets synchronizer</a></li>
    <li><a href="../plugins/built-in-plugins.html#workflow-job" class="header">Workflow job</a></li>
    <li><a href="../plugins/built-in-plugins.html#otoroshi-next-proxy-engine-experimental-" class="header">Otoroshi next proxy engine (experimental)</a></li>
    <li><a href="../plugins/built-in-plugins.html#forward-traffic" class="header">Forward traffic</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2022</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.5/elasticlunr.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112498312-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-112498312-1');
</script>
</html>




